(this.webpackJsonpsav3=this.webpackJsonpsav3||[]).push([[0],{1061:function(e,t){},1105:function(e,t){},1283:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(0),s=n(43),c=n.n(s),i=n(24),o=n(56),u=n(1349),l=n(1323),p=n(90),d=n(16),f=n(1332),b=n(1287),h=n(1334),j=n(1335),v=n(247),x=n.n(v),g=n(251),O=n.n(g),m=n(167),w=n.n(m),y=n(248),k=n.n(y),C=n(250),S=n.n(C),I=n(249),P=n.n(I),F=n(1333),N=n(1351),R=n(252),B=n.n(R),U=n(1336),A=n(39),T=n(201),W=n.n(T),D=function(e){return W()({},M,e)},M=D({Follow:function(){return"Follow"},Unfollow:function(){return"Unfollow"},"Edit profile":function(){return"Edit profile"},"Display name":function(){return"Display name"},Description:function(){return"Description"},"Thumbnail URL":function(){return"Thumbnail URL"},"Banner URL":function(){return"Banner URL"},Home:function(){return"Home"},Profile:function(){return"Profile"},Search:function(){return"Search"},"Search user ID":function(){return"Search user ID"},Peers:function(){return"Peers"},"Connected peers posts":function(){return"Connected peers posts"},Stats:function(){return"Stats"},"Connected peers stats":function(){return"Connected peers stats"},"Connecting to peers":function(){return"Connecting to peers"},Following:function(){return"Following"},"Not following anyone":function(){return"Not following anyone"},Export:function(){return"Export"},Import:function(){return"Import"},"Uncensorable content":function(){return"Uncensorable content"}}),E=n(254);Object(E.b)("es-MX",(function(e,t,n){return[["justo ahora","en un rato"],["hace %s segundos","en %s segundos"],["hace 1 minuto","en 1 minuto"],["hace %s minutos","en %s minutos"],["hace 1 hora","en 1 hora"],["hace %s horas","en %s horas"],["hace 1 d\xeda","en 1 d\xeda"],["hace %s d\xedas","en %s d\xedas"],["hace 1 semana","en 1 semana"],["hace %s semanas","en %s semanas"],["hace 1 mes","en 1 mes"],["hace %s meses","en %s meses"],["hace 1 a\xf1o","en 1 a\xf1o"],["hace %s a\xf1os","en %s a\xf1os"]][t]}));var L=D({Follow:function(){return"Seguir"},Unfollow:function(){return"Dejar de seguir"},"Edit profile":function(){return"Editar perfil"},"Display name":function(){return"Nombre para mostrar"},Description:function(){return"Descripci\xf3n"},"Thumbnail URL":function(){return"URL de miniatura"},"Banner URL":function(){return"URL del banner"},Home:function(){return"Casa"},Profile:function(){return"Perfil"},Search:function(){return"Buscar"},"Search user ID":function(){return"Buscar ID de usuario"},Peers:function(){return"Compa\xf1eros"},"Connected peers posts":function(){return"Publicaciones de compa\xf1eros conectados"},Stats:function(){return"Estadisticas"},"Connected peers stats":function(){return"Estad\xedsticas de compa\xf1eros conectados"},"Connecting to peers":function(){return"Conectando con sus compa\xf1eros"},Following:function(){return"Siguiendo"},"Not following anyone":function(){return"No seguir a nadie"},Export:function(){return"Exportar"},Import:function(){return"Importar"},"Uncensorable content":function(){return"Contenido sin censura"}}),K={"en-US":M,"es-MX":L};Object.freeze(K);var z=K,J=Object(a.createContext)({languageCode:"en-US",setLanguageCode:null}),_=function(e){var t="en-US",n=window.navigator.language,s=localStorage.getItem("languageCode")||n||t;z[s]||(console.warn("no available translation for '".concat(s,"'")),s=t);var c=Object(a.useState)(s),i=Object(d.a)(c,2),o=i[0],u=i[1],l={languageCode:o,setLanguageCode:function(e){z[e]?(localStorage.setItem("languageCode",e),u(e)):console.warn("no available translation for '".concat(e,"'"))}},p=e.children;return Object(r.jsx)(J.Provider,{value:l,children:p})},H=function(){var e=Object(a.useContext)(J).languageCode;return z[e]},q=n(1),V=n.n(q),G=n(10),Z=n(1353),Q=n(44),X=n(29),$=n(117),Y=n(92),ee=n(237),te=n(255),ne=n(347),re=n.n(ne),ae=n(540),se=n(11),ce=n.n(se),ie=n(168),oe=n(165),ue=n.n(oe),le=function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.name,s=r.maxSize;ce()("string"===typeof a,"invalid idb lru cache '".concat(a,"' not a string")),ce()("number"===typeof s,"invalid idb lru maxSize '".concat(s,"' not a number"));var c=!1,i=function(){var r=Object(G.a)(V.a.mark((function r(){var s,i,o,u;return V.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=ie.createInstance({name:a}),i=ie.createInstance({name:"_".concat(a)}),r.next=4,s.length();case 4:return o=r.sent,r.next=7,i.length();case 7:u=r.sent,o>u?(t=s,e=i,n=o):(t=i,e=s,n=u),c=!0;case 10:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();i();var o=function(){var e=Object(G.a)(V.a.mark((function e(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ue()(10);case 4:return e.next=6,o();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function u(e,t){return l.apply(this,arguments)}function l(){return(l=Object(G.a)(V.a.mark((function r(a,c){var i;return V.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.setItem(a,c);case 2:if(!(++n>=s)){r.next=11;break}return n=0,i=t,t=e,e=i,r.next=11,e.clear();case 11:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return{has:function(){var n=Object(G.a)(V.a.mark((function n(r){var a,s;return V.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o();case 2:return n.next=4,e.getItem(r);case 4:return a=n.sent,n.next=7,t.getItem(r);case 7:return s=n.sent,n.abrupt("return",null!==a&&void 0!==a||null!==s&&void 0!==s);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),remove:function(){var n=Object(G.a)(V.a.mark((function n(r){return V.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o();case 2:return n.next=4,e.removeItem(r);case 4:return n.next=6,t.removeItem(r);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),get:function(){var n=Object(G.a)(V.a.mark((function n(r){var a,s,c;return V.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o();case 2:return n.next=4,e.getItem(r);case 4:return a=n.sent,n.next=7,t.getItem(r);case 7:if(s=n.sent,null===(c=a)||void 0===a){n.next=11;break}return n.abrupt("return",c);case 11:if(null===(c=s)||void 0===(c=s)){n.next=15;break}return n.next=14,u(r,c);case 14:return n.abrupt("return",c);case 15:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),set:function(){var t=Object(G.a)(V.a.mark((function t(n,r){var a;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o();case 2:return t.next=4,e.getItem(n);case 4:if(null===(a=t.sent)||void 0===a){t.next=10;break}return t.next=8,e.setItem(n,r);case 8:t.next=12;break;case 10:return t.next=12,u(n,r);case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),clear:function(){var n=Object(G.a)(V.a.mark((function n(){return V.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o();case 2:return n.next=4,e.clear();case 4:return n.next=6,t.clear();case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()}};window.IdbLru=le;var pe=le,de=pe({name:"sdpCache",maxSize:2e3}),fe=function(e){return function(){var t=Object(G.a)(V.a.mark((function t(n,r){var a,s;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(n,r);case 2:return a=t.sent,s=n.getPeerId(),de.set(s,a._pc.remoteDescription.sdp),t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},be=function(e){return function(){var t=Object(G.a)(V.a.mark((function t(n){var r,a;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(n);case 2:return r=t.sent,a=r.remotePeer.toB58String(),de.set(a,n.conn._pc.remoteDescription.sdp),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},he=function(){var e=Object(G.a)(V.a.mark((function e(t){var n,r,a;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ce()(t&&"string"===typeof t,"invalid peer id ".concat(t)),e.next=3,de.get(t);case 3:return n=e.sent,ce()(n,"no sdp cache for peer id '".concat(t,"'")),r=ae.parse(n),a={ip:r.media[0].connection.ip,port:r.media[0].port,protocol:r.media[0].protocol},e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je={withWebRtcSdpCache:function(e){var t=e.libp2p.transportManager._transports.get("WebRTCStar")._connect;t=t.bind(e.libp2p.transportManager._transports.get("WebRTCStar")),e.libp2p.transportManager._transports.get("WebRTCStar")._connect=fe(t);var n=e.libp2p.transportManager._transports.get("WebRTCStar")._upgrader.upgradeInbound;return n=n.bind(e.libp2p.transportManager._transports.get("WebRTCStar")._upgrader),e.libp2p.transportManager._transports.get("WebRTCStar")._upgrader.upgradeInbound=be(n),e},sdpCache:de,getWebRtcPeerConnectionInfo:he},ve=n(240),xe=new(n.n(ve).a)({maxSize:1e3}),ge=function(e){return function(t,n,r){if(!1===r){var a=t,s=n.cid.toString();xe.set(a,s)}return e(t,n,r)}},Oe=function(e){var t=e.ipld.bs._bitswap._updateReceiveCounters;return t=t.bind(e.ipld.bs._bitswap),e.ipld.bs._bitswap._updateReceiveCounters=ge(t),e},me=n(26),we=n.n(me),ye=n(541),ke=n(38),Ce=n.n(ke),Se=n(53),Ie=n.n(Se),Pe=n(82),Fe=n.n(Pe),Ne=n(62),Re=["https://i.imgur.com/iKxWt1c.jpg","https://i.imgur.com/iD4bp6Mb.jpg","https://i.imgur.com/65kSbHTb.jpg","https://i.imgur.com/tNsOG3Bb.jpg","https://i.imgur.com/qiQHwHbb.jpg","https://i.imgur.com/txRRZpd.jpeg"],Be=["https://i.imgur.com/ImQWjja.jpeg","https://i.imgur.com/txRRZpd.jpeg","https://i.imgur.com/2LwSsSu.gif","https://i.imgur.com/gpKZaRK.jpeg"],Ue=["https://i.imgur.com/qiQHwHb.mp4","i.imgur.com/ImQWjja.jpeg","http://i.imgur.com/txRRZpd.jpeg","https://i.imgur.com/2LwSsSu.gif","i.imgur.com/gpKZaRK.jpeg"],Ae=["Jimmy Nguyen","Shadders","WallStreet5","Joshua Henslee","John M"],Te=["Founder and CEO of XYZ.  Architect of the XYZ Protocol","I like Networks & Social Paradigm Shifts.","Spanish IT Raspberry Pi 4 + Python #BigData #Hacking #Cybersecurity #IoT #IPv6","U mad bro?","Praesentpellentesquetellussitametnuncfaucibus,sitametconvallissemporta.Sedmetudui,luctusavolutpatid,malesuadaadui."],We=["https://mystartup.com","mystartup.com","https://twitter.com/crypto","https://t.me/sav3org"],De=["Lorem ipsum dolor sit amet, consectetur adipiscing elit.","Duis turpis nibh, feugiat gravida venenatis vitae, eleifend eu enim. Ut in luctus lorem. Vivamus lectus nunc, cursus eget eleifend ut, luctus et nibh.","Suspendisse","Praesent pellentesque tellus sit amet nunc faucibus, sit amet convallis sem porta. Sed metus dui, luctus a volutpat id, malesuada a dui.","Nullam egestas eget augue id dapibus","Praesentpellentesquetellussitametnuncfaucibus,sitametconvallissemporta.Sedmetudui,luctusavolutpatid,malesuadaadui."],Me=0,Ee=function(e){var t=Math.floor(Math.random()*e.length);return t+=Me++,e[t%=e.length]},Le=function(e){window.sav3IpfsTest={},window.sav3IpfsTest.add=Object(G.a)(V.a.mark((function t(){var n,r;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={content:"hello world "+Math.random()},t.next=3,e.ipfs.add(n);case 3:r=t.sent,console.log(r);case 5:case"end":return t.stop()}}),t)}))),window.sav3IpfsTest.get=function(){var t=Object(G.a)(V.a.mark((function t(n){var r,a,s,c,i,o,u,l,p,d,f,b,h,j,v;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=!0,a=!1,t.prev=2,c=Object(Ne.a)(e.ipfs.get(n));case 4:return t.next=6,c.next();case 6:return i=t.sent,r=i.done,t.next=10,i.value;case 10:if(o=t.sent,r){t.next=54;break}if(u=o,console.log(u.path),u.content){t.next=16;break}return t.abrupt("continue",51);case 16:l=[],p=!0,d=!1,t.prev=19,b=Object(Ne.a)(u.content);case 21:return t.next=23,b.next();case 23:return h=t.sent,p=h.done,t.next=27,h.value;case 27:if(j=t.sent,p){t.next=34;break}v=j,l.push(v);case 31:p=!0,t.next=21;break;case 34:t.next=40;break;case 36:t.prev=36,t.t0=t.catch(19),d=!0,f=t.t0;case 40:if(t.prev=40,t.prev=41,p||null==b.return){t.next=45;break}return t.next=45,b.return();case 45:if(t.prev=45,!d){t.next=48;break}throw f;case 48:return t.finish(45);case 49:return t.finish(40);case 50:console.log(l.toString());case 51:r=!0,t.next=4;break;case 54:t.next=60;break;case 56:t.prev=56,t.t1=t.catch(2),a=!0,s=t.t1;case 60:if(t.prev=60,t.prev=61,r||null==c.return){t.next=65;break}return t.next=65,c.return();case 65:if(t.prev=65,!a){t.next=68;break}throw s;case 68:return t.finish(65);case 69:return t.finish(60);case 70:case"end":return t.stop()}}),t,null,[[2,56,60,70],[19,36,40,50],[41,,45,49],[61,,65,69]])})));return function(e){return t.apply(this,arguments)}}(),window.sav3IpfsTest.addresses=Object(G.a)(V.a.mark((function t(){var n,r,a,s,c;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.ipfs.swarm.addrs();case 2:for(r in n=t.sent){a=Object(X.a)(n[r].addrs);try{for(a.s();!(s=a.n()).done;)(c=s.value).string=c.toString()}catch(i){a.e(i)}finally{a.f()}}console.log(n);case 5:case"end":return t.stop()}}),t)}))),window.sav3IpfsTest.peers=Object(G.a)(V.a.mark((function t(){var n,r,a,s;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.ipfs.swarm.peers();case 2:n=t.sent,r=Object(X.a)(n);try{for(r.s();!(a=r.n()).done;)(s=a.value).addrString=s.addr.toString()}catch(c){r.e(c)}finally{r.f()}console.log(n);case 6:case"end":return t.stop()}}),t)}))),window.sav3IpfsTest.editProfile=Object(G.a)(V.a.mark((function t(){var n;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Math.random()>.5?Ee(We):"",t.next=3,e.editUserProfile({displayName:Ee(Ae),description:"".concat(Ee(Te).substring(0,100)," ").concat(n),thumbnailUrl:Ee(Re),bannerUrl:Ee(Be)});case 3:case"end":return t.stop()}}),t)}))),window.sav3IpfsTest.publishPosts=Object(G.a)(V.a.mark((function t(){var n,r,a=arguments;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.length>0&&void 0!==a[0]?a[0]:5;case 1:if(!n--){t.next=7;break}return r=Math.random()>.5?Ee(Ue):"",t.next=5,e.publishPost({content:"".concat(Ee(De).substring(0,100)," ").concat(r)});case 5:t.next=1;break;case 7:case"end":return t.stop()}}),t)}))),window.sav3IpfsTest.editProfileAndPublishPosts=function(){var e=Object(G.a)(V.a.mark((function e(t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.sav3IpfsTest.editProfile();case 2:return e.next=4,window.sav3IpfsTest.publishPosts(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),window.sav3IpfsTest.importExport=function(){var t=Object(G.a)(V.a.mark((function t(n){var r,a,s,c,i,o,u,l,p,d;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.waitForReady();case 2:return t.next=4,e.ipfs.id();case 4:return r=t.sent,a=r.id,s=r.publicKey,t.next=9,e.getOwnPeerCid();case 9:return c=t.sent,t.next=12,e.getPrivateKey();case 12:return i=t.sent,t.next=15,e.setPrivateKey(n||i);case 15:return t.next=17,e.waitForReady();case 17:return t.next=19,e.ipfs.id();case 19:return o=t.sent,u=o.id,l=o.publicKey,t.next=24,e.getOwnPeerCid();case 24:return p=t.sent,t.next=27,e.getPrivateKey();case 27:d=t.sent,console.log("oldCid",a),console.log("newCid",u),console.log("oldPeerCid",c),console.log("newPeerCid",p),console.log("oldPublicKey",s),console.log("newPublicKey",l),console.log("oldPrivateKey",i),console.log("newPrivateKey",d);case 36:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Ke=n(27),ze=n.n(Ke),Je=n(241),_e=new(function(e){Object(ee.a)(n,e);var t=Object(te.a)(n);function n(){var e;return Object($.a)(this,n),(e=t.call(this)).ipfs=null,e.ipnsClient=null,e._initIpfs().catch(console.log),e}return Object(Y.a)(n,[{key:"_initIpfs",value:function(){var e=Object(G.a)(V.a.mark((function e(){var t,n,r,a,s,c,i=this,o=arguments;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},(n=t.privateKey)&&(a={PrivKey:n}),s={preload:{enabled:!1},repo:r,config:{Identity:a,Bootstrap:[],Addresses:{Delegates:[],Swarm:Je.a.starServers}}},console.log("_initIpfs",{ipfsOptions:s}),e.next=7,re.a.create(s);case 7:c=e.sent,this.ipfs=je.withWebRtcSdpCache(c),this.ipfs=Oe(c),this.ipnsClient=Object(ye.a)({ipfs:c}),this.ipnsClient.on("publish",(function(e,t){i.emit("publish",e,t)})),window.ipfs=this.ipfs,this.ipfs.libp2p.on("peer:discovery",(function(e){console.log("discovered",e)})),this.ipfs.libp2p.on("peer:connect",(function(e){console.log("connected",e),i.ipfs.swarm.peers().then((function(e){return console.log("current peers connected: ",e)}))})),this.setMaxListeners(100);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getPeersStats",value:function(){var e=Object(G.a)(V.a.mark((function e(){var t,n,r,a,s;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return t=[],e.next=5,this.getPeersCids();case 5:n=e.sent,r=Object(X.a)(n),e.prev=7,r.s();case 9:if((a=r.n()).done){e.next=18;break}return s=a.value,e.t0=t,e.next=14,this.getPeerStats(s);case 14:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 16:e.next=9;break;case 18:e.next=23;break;case 20:e.prev=20,e.t2=e.catch(7),r.e(e.t2);case 23:return e.prev=23,r.f(),e.finish(23);case 26:return console.log("getPeersStats",{peersStats:t}),e.abrupt("return",t);case 28:case"end":return e.stop()}}),e,this,[[7,20,23,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"getPeerStats",value:function(){var e=Object(G.a)(V.a.mark((function e(t){var n,r,a,s,c,i,o,u,l;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return ce()("string"===typeof t,"sav3Ipfs.getPeerStats peerId '".concat(t,"' not a string")),n=this.ipfs.libp2p.metrics,e.prev=4,e.next=7,je.getWebRtcPeerConnectionInfo(t);case 7:c=e.sent,r=c.ip,a=c.port,s=c.protocol,e.next=15;break;case 13:e.prev=13,e.t0=e.catch(4);case 15:return i=n.forPeer(we.a.createFromCID(t)).toJSON(),o=Number(i.dataReceived),u=Number(i.dataSent),l={peerCid:t,ip:r,port:a,protocol:s,dataReceived:o,dataSent:u},e.abrupt("return",l);case 20:case"end":return e.stop()}}),e,this,[[4,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getPeersCids",value:function(){var e=Object(G.a)(V.a.mark((function e(){var t,n,r,a,s,c,i;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return e.next=4,this.ipfs.swarm.peers();case 4:t=e.sent,n=new Set,r=[],a=Object(X.a)(t),e.prev=8,a.s();case 10:if((s=a.n()).done){e.next=19;break}if(c=s.value,i=c.peer,!n.has(i)){e.next=15;break}return e.abrupt("continue",17);case 15:n.add(i),r.push(i);case 17:e.next=10;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(8),a.e(e.t0);case 24:return e.prev=24,a.f(),e.finish(24);case 27:return e.abrupt("return",r);case 28:case"end":return e.stop()}}),e,this,[[8,21,24,27]])})));return function(){return e.apply(this,arguments)}}()},{key:"getPrivateKey",value:function(){var e=Object(G.a)(V.a.mark((function e(){var t,n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return e.next=4,this.ipfs.key.export("self","password");case 4:return t=e.sent,e.next=7,Fe.a.keys.import(t,"password");case 7:return n=e.sent,e.abrupt("return",ze()(n.bytes,"base64"));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPrivateKey",value:function(){var e=Object(G.a)(V.a.mark((function e(t){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ce()(t&&"string"===typeof t,"sav3Ipfs.setPrivateKey base64PrivateKey '".concat(t,"' not a string")),n=this.ipfs,delete this.ipfs,e.next=5,n.stop();case 5:return e.next=7,this._initIpfs({privateKey:t});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getOwnPeerCid",value:function(){var e=Object(G.a)(V.a.mark((function e(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return e.next=4,_e.ipfs.id();case 4:return e.abrupt("return",e.sent.id);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getOwnUserCid",value:function(){var e=Object(G.a)(V.a.mark((function e(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return e.next=4,_e.ipfs.id();case 4:return e.abrupt("return",e.sent.id);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getIpnsFile",value:function(){var e=Object(G.a)(V.a.mark((function e(t){var n,r;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return ce()(t&&"string"===typeof t,"sav3Ipfs.getIpnsFile ipnsCid '".concat(t,"' not a string")),e.next=5,this.ipfs.name.resolve(t).next();case 5:return n=e.sent.value,e.next=8,this.getIpfsFile(n);case 8:return r=e.sent,e.abrupt("return",r);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getOwnIpnsRecord",value:function(){var e=Object(G.a)(V.a.mark((function e(){var t,n,r,a;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return e.next=4,_e.getOwnPeerCid();case 4:return t=e.sent,n=we.a.createFromCID(t),e.next=8,this.ipfs.libp2p.datastore.get(Ie.a.getLocalKey(n.id));case 8:return r=e.sent,a=Ie.a.unmarshal(r),e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"putOwnIpnsRecord",value:function(){var e=Object(G.a)(V.a.mark((function e(){var t,n,r,a,s,c,i,o,u,l,p=arguments;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},n=t.value,r=t.sequence,e.next=3,this.waitForReady();case 3:return ce()(n&&"string"===typeof n,"sav3Ipfs.putOwnIpnsRecord value '".concat(n,"' not a string")),ce()("number"===typeof r,"sav3Ipfs.putOwnIpnsRecord sequence '".concat(r,"' not a number")),n.startsWith("/ipfs/")||(n="/ipfs/".concat(n)),a=31536e7,e.next=9,this.ipfs.key.export("self","password");case 9:return s=e.sent,e.next=12,Fe.a.keys.import(s,"password");case 12:return c=e.sent,e.next=15,Ie.a.create(c,n,r,a);case 15:return i=e.sent,o=Ie.a.marshal(i),e.next=19,_e.getOwnPeerCid();case 19:return u=e.sent,l=we.a.createFromCID(u),e.next=23,this.ipfs.libp2p.datastore.put(Ie.a.getLocalKey(l.id),o);case 23:return e.next=25,this.ipfs.name.resolve(u);case 25:return e.abrupt("return",i);case 26:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getIpfsFile",value:function(){var e=Object(G.a)(V.a.mark((function e(t){var n,r,a;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return ce()(t&&"string"===typeof t,"sav3Ipfs.getIpfsFile fileCid '".concat(t,"' not a string")),e.next=5,this.ipfs.get(t).next();case 5:if(!(n=e.sent.value).content){e.next=11;break}return e.next=9,n.content.next();case 9:a=e.sent,r=a&&a.value&&a.value.toString();case 11:return console.log("getIpfsFile",{fileCid:t,file:n,content:r}),e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getOwnIpnsData",value:function(){var e=Object(G.a)(V.a.mark((function e(){var t,n,r;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return e.next=4,this.getOwnIpnsRecord();case 4:return t=e.sent,n=t.value.toString(),e.next=8,this.getIpfsFile(n);case 8:if(r=e.sent,console.log("getOwnIpnsData",{ownIpfsValue:n,lastIpnsData:r}),r){e.next=12;break}return e.abrupt("return",{});case 12:return e.abrupt("return",JSON.parse(r));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"subscribeToIpnsPath",value:function(){var e=Object(G.a)(V.a.mark((function e(t){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ce()(t&&"string"===typeof t,"sav3Ipfs.subscribeToIpnsPath ipnsPath '".concat(t,"' not a string")),e.next=3,this.waitForReady();case 3:return e.next=5,this.ipnsClient.subscribe([t]);case 5:return n=e.sent,e.abrupt("return",n[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"subscribeToIpnsPaths",value:function(){var e=Object(G.a)(V.a.mark((function e(t){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ce()(Array.isArray(t),"sav3Ipfs.subscribeToIpnsPaths ipnsPaths '".concat(t,"' not an array")),e.next=3,this.waitForReady();case 3:return e.next=5,this.ipnsClient.subscribe(t);case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"publishPost",value:function(){var e=Object(G.a)(V.a.mark((function e(){var t,n,r,a,s,c,i,o,u=arguments;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},n=t.content,r=t.parentPostCid,e.next=3,this.waitForReady();case 3:return ce()(n&&"string"===typeof n,"sav3Ipfs.publishPost content '".concat(n,"' not a string")),ce()(n.length<=140,"sav3Ipfs.publishPost content '".concat(n,"' longer than 140 chars")),ce()(!r||"string"===typeof r,"sav3Ipfs.publishPost parentPostCid '".concat(r,"' not a string")),e.next=8,this.getOwnIpnsData();case 8:return a=e.sent,(s={}).previousPostCid=a.lastPostCid,s.timestamp=Math.round(Date.now()/1e3),e.next=14,this.ipfs.id();case 14:return s.userCid=e.sent.id,e.next=17,this.ipfs.add(n);case 17:return s.contentCid=e.sent.cid.toString(),e.next=20,this.ipfs.add(JSON.stringify(s));case 20:return c=e.sent.cid.toString(),i=Object(Q.a)(Object(Q.a)({},a),{},{lastPostCid:c}),e.next=24,this.ipfs.add(JSON.stringify(i));case 24:return o=e.sent.cid.toString(),e.next=27,this.publishIpnsRecord(o);case 27:return console.log("publishPost",{newIpnsDataCid:o,newPost:s,newIpnsData:i,ipnsData:a,newPostCid:c}),e.abrupt("return",c);case 29:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"publishIpnsRecord",value:function(){var e=Object(G.a)(V.a.mark((function e(t){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return ce()("string"===typeof t,"sav3Ipfs.publishIpnsRecord '".concat(t,"' not a string")),e.next=5,this.getOwnIpnsRecordSequence();case 5:return e.t0=e.sent,n=e.t0+1,e.next=9,this.ipnsClient.publish({value:t,sequence:n});case 9:return e.next=11,this.putOwnIpnsRecord({value:t,sequence:n});case 11:console.log("publishIpnsRecord",{newIpnsDataCid:t,sequence:n});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"editUserProfile",value:function(){var e=Object(G.a)(V.a.mark((function e(){var t,n,r,a,s,c,i,o,u,l=arguments;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},n=t.displayName,r=t.description,a=t.thumbnailUrl,s=t.bannerUrl,e.next=3,this.waitForReady();case 3:if(c={},!n){e.next=10;break}return ce()("string"===typeof n,"display name not a string"),ce()(n.length<=50,"display name '".concat(n,"' longer than 50 chars")),e.next=9,this.ipfs.add(n);case 9:c.diplayNameCid=e.sent.cid.toString();case 10:if(!r){e.next=16;break}return ce()("string"===typeof r,"description not a string"),ce()(r.length<=140,"description '".concat(r,"' longer than 140 chars")),e.next=15,this.ipfs.add(r);case 15:c.descriptionCid=e.sent.cid.toString();case 16:if(!a){e.next=23;break}return ce()("string"===typeof a,"thumbnail url not a string"),ce()(a.startsWith("https://"),"thumbnail url '".concat(a,"' does not start with https://")),ce()(a.length<=140,"thumbnail url '".concat(a,"' longer than 140 chars")),e.next=22,this.ipfs.add(a);case 22:c.thumbnailUrlCid=e.sent.cid.toString();case 23:if(!s){e.next=30;break}return ce()("string"===typeof s,"banner url not a string"),ce()(s.startsWith("https://"),"banner url '".concat(s,"' does not start with https://")),ce()(s.length<=140,"banner url '".concat(a,"' longer than 140 chars")),e.next=29,this.ipfs.add(s);case 29:c.bannerUrlCid=e.sent.cid.toString();case 30:return e.next=32,this.ipfs.add(JSON.stringify(c));case 32:return i=e.sent.cid.toString(),e.next=35,this.getOwnIpnsData();case 35:return(o=e.sent).profileCid=i,e.next=39,this.ipfs.add(JSON.stringify(o));case 39:return u=e.sent.cid.toString(),e.next=42,this.publishIpnsRecord(u);case 42:return console.log("editProfile",{displayName:n,description:r,thumbnailUrl:a,bannerUrl:s,ipnsData:o,profile:c,profileCid:i,newIpnsDataCid:u}),e.abrupt("return",i);case 44:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUserProfile",value:function(){var e=Object(G.a)(V.a.mark((function e(t){var n,r;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return ce()("string"===typeof t,"sav3Ipfs.getUserProfile profileCid '".concat(t,"' not a string")),e.t0=JSON,e.next=6,this.getIpfsFile(t);case 6:if(e.t1=e.sent,n=e.t0.parse.call(e.t0,e.t1),r={},!n.diplayNameCid){e.next=13;break}return e.next=12,this.getIpfsFile(n.diplayNameCid);case 12:r.displayName=e.sent;case 13:if(!n.descriptionCid){e.next=17;break}return e.next=16,this.getIpfsFile(n.descriptionCid);case 16:r.description=e.sent;case 17:if(!n.thumbnailUrlCid){e.next=21;break}return e.next=20,this.getIpfsFile(n.thumbnailUrlCid);case 20:r.thumbnailUrl=e.sent;case 21:if(!n.bannerUrlCid){e.next=25;break}return e.next=24,this.getIpfsFile(n.bannerUrlCid);case 24:r.bannerUrl=e.sent;case 25:return console.log("getProfile",{profileCid:t,profileCids:n,profile:r}),e.abrupt("return",r);case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getOwnIpnsRecordSequence",value:function(){var e=Object(G.a)(V.a.mark((function e(){var t,n,r,a,s,c,i;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:return e.next=4,this.getOwnIpnsRecord();case 4:return t=e.sent,n=t,e.next=8,_e.getOwnPeerCid();case 8:return r=e.sent,e.next=11,this.ipnsClient.getRecords([r]);case 11:if(a=e.sent,s=Object(d.a)(a,1),c=s[0],i=c&&c.sequence||0,!(n>i)){e.next=19;break}return e.abrupt("return",n);case 19:return e.abrupt("return",i);case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUserPostsFromLastPostCid",value:function(){var e=Object(G.a)(V.a.mark((function e(t){var n,r,a;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForReady();case 2:ce()(t&&"string"===typeof t,"sav3Ipfs.getUserPostsFromLastPostCid lastPostCid '".concat(t,"' not a string")),n=[],r=5;case 5:if(t){e.next=8;break}return e.abrupt("break",23);case 8:if(!(n.length>=r)){e.next=10;break}return e.abrupt("break",23);case 10:return e.t0=JSON,e.next=13,this.getIpfsFile(t);case 13:return e.t1=e.sent,(a=e.t0.parse.call(e.t0,e.t1)).cid=t,t=a.previousPostCid,e.next=19,this.getIpfsFile(a.contentCid);case 19:a.content=e.sent,n.push(a),e.next=5;break;case 23:return console.log("getUserPostsFromLastPostCid",{lastPostCid:t,posts:n}),e.abrupt("return",n);case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isReady",value:function(){return!!this.ipfs}},{key:"waitForReady",value:function(){var e=Object(G.a)(V.a.mark((function e(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ipfs){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ue()(10);case 4:return e.next=6,this.waitForReady();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Ce.a));window.sav3Ipfs=_e,window.Ipfs=re.a,Le(_e);var He=_e,qe=n(1352),Ve=n(1326),Ge=n(1329),Ze=n(542),Qe=n.n(Ze),Xe=n(1327),$e=n(1328),Ye=n(1325),et=Object(l.a)((function(e){return{content:{paddingTop:0,paddingBottom:0,overflow:"hidden"}}}));var tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.open,n=e.onClose,a=e.content,s=e.actions,c=et(),i=Object(p.a)(),o=Object(Ye.a)(i.breakpoints.down("xs"));return Object(r.jsxs)(Ve.a,{fullScreen:o,fullWidth:!0,maxWidth:"xs",open:t,onClose:n,children:[Object(r.jsxs)(N.a,{alignItems:"center",display:"flex",px:2,height:i.sav3.topBar.height,children:[Object(r.jsx)(N.a,{flexGrow:1,children:Object(r.jsx)(Xe.a,{onClick:n,children:Object(r.jsx)(Qe.a,{})})}),o&&Object(r.jsx)(N.a,{px:1,children:s})]}),Object(r.jsx)($e.a,{}),Object(r.jsx)(Ge.a,{className:c.content,children:a}),!o&&Object(r.jsxs)("div",{children:[Object(r.jsx)($e.a,{}),Object(r.jsxs)(N.a,{alignItems:"center",display:"flex",px:3,height:i.sav3.topBar.height,children:[Object(r.jsx)(N.a,{flexGrow:1}),Object(r.jsx)(N.a,{children:s})]})]})]})},nt=function(e){ce()(!e||"string"===typeof e,"invalid ipnsPath '".concat(JSON.stringify(e),"'"));var t=Object(a.useState)(),n=Object(d.a)(t,2),r=n[0],s=n[1];return console.log("useUserIpnsData",{ipnsPath:e,userIpnsData:r}),Object(a.useEffect)((function(){if(e){var t=function(){var t=Object(G.a)(V.a.mark((function t(n,r){var a;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e===n){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,He.getIpfsFile(r);case 4:a=t.sent,s(JSON.parse(a));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return He.on("publish",t),Object(G.a)(V.a.mark((function t(){var n,r;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,He.subscribeToIpnsPath(e);case 2:if(n=t.sent){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,He.getIpfsFile(n);case 7:r=t.sent,s(JSON.parse(r));case 9:case"end":return t.stop()}}),t)})))(),function(){He.off("publish",t)}}}),[e]),r},rt=function(e){ce()(!e||"string"===typeof e,"invalid userCid '".concat(JSON.stringify(e),"'"));var t=Object(a.useState)({}),n=Object(d.a)(t,2),r=n[0],s=n[1],c=nt(e),i=c&&c.profileCid;return console.log("useUserProfile",{userIpnsData:c,userCid:e,profileCid:i,userProfile:r}),Object(a.useEffect)((function(){i&&"string"===typeof i&&Object(G.a)(V.a.mark((function e(){var t;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,He.getUserProfile(i);case 2:t=e.sent,s(t);case 4:case"end":return e.stop()}}),e)})))()}),[i]),r},at=function(){var e=Object(a.useState)(),t=Object(d.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){Object(G.a)(V.a.mark((function e(){var t;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,He.getOwnUserCid();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})))()}),[]),n},st=n(1356),ct=n(104),it=Object(l.a)((function(e){return{errorMessage:{overflow:"hidden"},content:{"& textarea":{overflow:"hidden"},"& fieldset":{border:"none"},marginBottom:e.spacing(1)},avatar:{marginTop:e.spacing(-.25),width:e.spacing(6),height:e.spacing(6),borderWidth:e.sav3.borderWidth,borderStyle:"solid",borderColor:e.sav3.borderColor},userCid:{wordBreak:"break-all"}}}));function ot(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.parentPost,n=it();return Object(r.jsxs)(N.a,{display:"flex",children:[Object(r.jsx)(N.a,{pr:1,py:1.5,children:Object(r.jsx)(st.a,{src:t.profile.thumbnailUrl,className:n.avatar})}),Object(r.jsxs)(N.a,{pt:1.5,pl:.5,flexGrow:1,children:[t.profile.displayName&&Object(r.jsx)(ct.a,{variant:"subtitle2",children:t.profile.displayName}),Object(r.jsx)(ct.a,{variant:"caption",color:"textSecondary",className:n.userCid,children:t.userCid}),Object(r.jsx)(ct.a,{variant:"body2",children:t.content})]})]})}var ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.open,n=e.onClose,s=e.parentPost,c=H(),i=it(),o=Object(a.useState)(""),u=Object(d.a)(o,2),l=u[0],p=u[1],f=Object(a.useState)(),b=Object(d.a)(f,2),h=b[0],j=b[1],v=at(),x=rt(v),g=function(e){var t=e.target.value;try{t.length>140&&(t=t.subtring(0,140)),p(t)}catch(n){}},O=function(){var e=Object(G.a)(V.a.mark((function e(){var t;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s&&s.cid,e.prev=1,e.next=4,He.publishPost({content:l,parentPostCid:t});case 4:j(null),p(null),n(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),j(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),m=Object(r.jsxs)(a.Fragment,{children:[s&&Object(r.jsx)(ot,{parentPost:s}),Object(r.jsxs)(N.a,{display:"flex",children:[Object(r.jsx)(N.a,{pr:1,py:1.5,children:Object(r.jsx)(st.a,{src:x.thumbnailUrl,className:i.avatar})}),Object(r.jsx)(Z.a,{autoFocus:!0,className:i.content,onChange:g,margin:"dense",id:"content",placeholder:c["Uncensorable content"](),fullWidth:!0,multiline:!0,rows:4,variant:"outlined",value:l}),h&&Object(r.jsx)(qe.a,{classes:{message:i.errorMessage},severity:"error",children:h})]})]}),w=Object(r.jsx)("div",{children:Object(r.jsx)(F.a,{disableElevation:!0,variant:"contained",onClick:O,color:"primary",children:"SAV3"})});return Object(r.jsx)(tt,{onClose:n,open:t,content:m,actions:w})},lt=Object(l.a)((function(e){return{logo:{height:"1.1em"},logoButton:{height:"2.2em",width:"2.2em"},createTextButtonBox:Object(i.a)({},e.breakpoints.down("md"),{display:"none"}),createIconButtonBox:Object(i.a)({},e.breakpoints.up("lg"),{display:"none"}),createIconButton:{boxShadow:"none"},text:Object(i.a)({},e.breakpoints.down("md"),{display:"none"}),root:Object(i.a)({},e.breakpoints.up("lg"),{paddingLeft:e.spacing(2),paddingRight:e.spacing(2)})}}));function pt(){var e=lt(),t=Object(a.useState)(!1),n=Object(d.a)(t,2),s=n[0],c=n[1];return Object(r.jsxs)("div",{children:[Object(r.jsx)(N.a,{my:2,mx:1,alignItems:"center",display:"flex",className:e.createTextButtonBox,onClick:function(){return c(!0)},children:Object(r.jsx)(F.a,{fullWidth:!0,variant:"contained",size:"large",disableElevation:!0,children:"SAV3"})}),Object(r.jsx)(N.a,{my:2,pl:1,alignItems:"center",display:"flex",className:e.createIconButtonBox,onClick:function(){return c(!0)},children:Object(r.jsx)(U.a,{className:e.createIconButton,size:"medium",children:Object(r.jsx)(B.a,{})})}),Object(r.jsx)(ut,{open:s,onClose:function(){return c(!1)}})]})}var dt=function(){var e=lt(),t=H();return Object(r.jsx)("div",{className:e.root,children:Object(r.jsxs)(f.a,{children:[Object(r.jsxs)(b.a,{button:!0,component:A.b,to:"/",children:[Object(r.jsx)(h.a,{children:Object(r.jsx)(x.a,{fontSize:"large"})}),Object(r.jsx)(j.a,{primary:t.Home(),className:e.text})]}),Object(r.jsxs)(b.a,{button:!0,component:A.b,to:"/search",children:[Object(r.jsx)(h.a,{children:Object(r.jsx)(w.a,{fontSize:"large"})}),Object(r.jsx)(j.a,{primary:t.Search(),className:e.text})]}),Object(r.jsxs)(b.a,{button:!0,component:A.b,to:"/following",children:[Object(r.jsx)(h.a,{children:Object(r.jsx)(k.a,{fontSize:"large"})}),Object(r.jsx)(j.a,{primary:t.Following(),className:e.text})]}),Object(r.jsxs)(b.a,{button:!0,component:A.b,to:"/peers",children:[Object(r.jsx)(h.a,{children:Object(r.jsx)(P.a,{fontSize:"large"})}),Object(r.jsx)(j.a,{primary:t.Peers(),className:e.text})]}),Object(r.jsxs)(b.a,{button:!0,component:A.b,to:"/stats",children:[Object(r.jsx)(h.a,{children:Object(r.jsx)(S.a,{fontSize:"large"})}),Object(r.jsx)(j.a,{primary:t.Stats(),className:e.text})]}),Object(r.jsxs)(b.a,{button:!0,component:A.b,to:"/profile",children:[Object(r.jsx)(h.a,{children:Object(r.jsx)(O.a,{fontSize:"large"})}),Object(r.jsx)(j.a,{primary:t.Profile(),className:e.text})]}),Object(r.jsx)(pt,{})]})})},ft=n(1337),bt=n(1338),ht=Object(l.a)((function(e){return{menu:{width:"100%",position:"fixed",bottom:0},createIconButtonBox:{right:e.spacing(4),bottom:e.spacing(8)},createIconButton:{}}}));function jt(){var e=ht(),t=Object(a.useState)(!1),n=Object(d.a)(t,2),s=n[0],c=n[1];return Object(r.jsxs)(N.a,{position:"absolute",className:e.createIconButtonBox,children:[Object(r.jsx)(N.a,{my:2,pl:1,alignItems:"center",display:"flex",className:e.createIconButton,onClick:function(){return c(!0)},children:Object(r.jsx)(U.a,{className:e.createIconButton,size:"large",children:Object(r.jsx)(B.a,{})})}),Object(r.jsx)(ut,{open:s,onClose:function(){return c(!1)}})]})}var vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.className,n=ht(),a=Object(o.h)("/:route"),s=a&&a.params&&a.params.route?a.params.route:"home";return Object(r.jsxs)(N.a,{className:t,children:[Object(r.jsxs)(ft.a,{value:s,className:n.menu,children:[Object(r.jsx)(jt,{}),Object(r.jsx)(bt.a,{component:A.b,to:"/",value:"home",icon:Object(r.jsx)(x.a,{})}),Object(r.jsx)(bt.a,{component:A.b,to:"/search",value:"search",icon:Object(r.jsx)(w.a,{})}),Object(r.jsx)(bt.a,{component:A.b,to:"/peers",value:"peers",icon:Object(r.jsx)(P.a,{})}),Object(r.jsx)(bt.a,{component:A.b,to:"/stats",value:"stats",icon:Object(r.jsx)(S.a,{})})]}),Object(r.jsx)(N.a,{width:0,className:"MuiBottomNavigation-root"})]})},xt=n(1339),gt=n(549),Ot=n(1355),mt="rgb(127, 127, 127, 0.05)",wt={breakpoints:{values:{xs:0,sm:682,md:960,lg:1280,xl:1920}},sav3:{layout:{columns:{left:{width:{md:275,sm:88,xs:68}},middle:{width:{md:600}},right:{width:{lg:350,md:290}}}},borderWidth:1,borderColor:mt,topBar:{height:54},drawerMenu:{width:280},popoverMenu:{borderRadius:4}},palette:{divider:mt},shape:{borderRadius:24},overrides:{MuiToolbar:{root:{minHeight:"".concat(54,"px!important")}},MuiDialog:{paper:{margin:0},paperFullWidth:{width:"100%"}},MuiSvgIcon:{fontSizeLarge:{fontSize:"1.8rem"}},MuiFab:{root:{boxShadow:"rgba(101, 119, 134, 0.2) 0px 0px 8px, rgba(101, 119, 134, 0.25) 0px 1px 3px 1px"}}}},yt=function(e){var t=Object(gt.a)(W()({},wt,e));return t=Object(Ot.a)(t)},kt={Light:yt(),Dark:yt({palette:{type:"dark"}}),"SAV3 Light":yt({palette:{primary:{light:"#7a7380",main:"#4e4854",dark:"#26212b"},secondary:{main:"#484854"}}})};Object.freeze(kt);var Ct=kt,St=Object(a.createContext)({theme:"Light",setTheme:null}),It=function(e){var t=Object(Ye.a)("(prefers-color-scheme: dark)")?"Dark":"Light",n=localStorage.getItem("muiTheme")||t;Ct[n]||(console.warn("no available theme for '".concat(n,"'")),n=t);var s=Object(a.useState)(n),c=Object(d.a)(s,2),i=c[0],o=c[1],u=Ct[i],l={theme:i,setTheme:function(e){Ct[e]?(localStorage.setItem("muiTheme",e),o(e)):console.warn("no available theme for '".concat(e,"'"))}},p=e.children;return Object(r.jsx)(St.Provider,{value:l,children:Object(r.jsx)(xt.a,{theme:u,children:p})})},Pt=n(1354),Ft=n(1340);var Nt=function(){var e=Object(a.useContext)(St),t=e.theme,n=e.setTheme,s=[];for(var c in Ct)s.push(Object(r.jsx)(Ft.a,{value:c,children:c},c));return Object(r.jsx)(Pt.a,{value:t,onChange:function(e){n(e.target.value)},label:"Theme",variant:"outlined",children:s})};var Rt=function(){var e=Object(a.useContext)(J),t=e.languageCode,n=e.setLanguageCode,s=[];for(var c in z)s.push(Object(r.jsx)(Ft.a,{value:c,children:c},c));return Object(r.jsx)(Pt.a,{value:t,onChange:function(e){n(e.target.value)},label:"Translation",variant:"outlined",children:s})},Bt=n(1341),Ut=n(1342),At=Object(l.a)((function(e){var t;return{appBar:{backgroundColor:e.palette.background.default},appBarSticky:(t={position:"fixed",left:"auto",right:"auto"},Object(i.a)(t,e.breakpoints.up("xs"),{width:e.sav3.layout.columns.middle.width.md-2*e.sav3.borderWidth}),Object(i.a)(t,e.breakpoints.down("xs"),{width:"calc(100% - ".concat(2*e.sav3.borderWidth,"px)")}),t),appBarStickyAfter:{height:e.sav3.topBar.height+e.sav3.borderWidth}}}));var Tt=function(e){var t=e.children,n=At();return Object(r.jsxs)("div",{children:[Object(r.jsxs)(Bt.a,{position:"sticky",color:"transparent",elevation:0,classes:{positionSticky:n.appBarSticky},className:n.appBar,children:[Object(r.jsx)(Ut.a,{disableGutters:!0,children:t}),Object(r.jsx)($e.a,{})]}),Object(r.jsx)("div",{className:n.appBarStickyAfter})]})},Wt=n(121),Dt=n.n(Wt),Mt=n(1346),Et=n(1344),Lt=n(253),Kt=n.n(Lt),zt=n(1345),Jt=n(546),_t=n.n(Jt),Ht=n(547),qt=n.n(Ht),Vt=n(545),Gt=n.n(Vt),Zt=n(548),Qt=n.n(Zt),Xt=n(1343),$t=function(){return Object(a.useContext)(J).languageCode},Yt=n(203),en=n.n(Yt),tn=n(550),nn=n(543),rn=n.n(nn),an=n(544),sn=n.n(an),cn=n(20),on=n.n(cn),un=new(function(){function e(){Object($.a)(this,e),this.followingCache=ie.createInstance({name:"followingCache"}),this.blockedCache=ie.createInstance({name:"blockedCache"})}return Object(Y.a)(e,[{key:"addFollowing",value:function(){var e=Object(G.a)(V.a.mark((function e(t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ce()("string"===typeof t,"FollowManager.addFollowing invalid userCid '".concat(t,"'")),e.next=3,this.deleteBlocked(t);case 3:return e.next=5,this.followingCache.setItem(t,!0);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isFollowing",value:function(){var e=Object(G.a)(V.a.mark((function e(t){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ce()("string"===typeof t,"FollowManager.isFollowing invalid userCid '".concat(t,"'")),e.next=3,this.followingCache.getItem(t);case 3:return n=e.sent,e.abrupt("return",!!n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteFollowing",value:function(){var e=Object(G.a)(V.a.mark((function e(t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ce()("string"===typeof t,"FollowManager.deleteFollowing invalid userCid '".concat(t,"'")),e.next=3,this.followingCache.removeItem(t);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllFollowing",value:function(){return this.followingCache.keys()}},{key:"setAllFollowing",value:function(){var e=Object(G.a)(V.a.mark((function e(t){var n,r,a;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ce()(Array.isArray(t),"FollowManager.setAllFollowing invalid userCids '".concat(t,"'")),e.next=3,this.followingCache.clear();case 3:n=Object(X.a)(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=12;break}return a=r.value,e.next=10,this.addFollowing(a);case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),n.e(e.t0);case 17:return e.prev=17,n.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[4,14,17,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"addBlocked",value:function(){var e=Object(G.a)(V.a.mark((function e(t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ce()("string"===typeof t,"FollowManager.addBlocked invalid userCid '".concat(t,"'")),e.next=3,this.deleteFollowing(t);case 3:return e.next=5,this.blockedCache.setItem(t,!0);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isBlocked",value:function(){var e=Object(G.a)(V.a.mark((function e(t){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ce()("string"===typeof t,"FollowManager.isBlocked invalid userCid '".concat(t,"'")),e.next=3,this.blockedCache.getItem(t);case 3:return n=e.sent,e.abrupt("return",!!n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteBlocked",value:function(){var e=Object(G.a)(V.a.mark((function e(t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ce()("string"===typeof t,"FollowManager.deleteBlocked invalid userCid '".concat(t,"'")),e.next=3,this.blockedCache.removeItem(t);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllBlocked",value:function(){return this.blockedCache.keys()}},{key:"setAllBlocked",value:function(){var e=Object(G.a)(V.a.mark((function e(t){var n,r,a;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ce()(Array.isArray(t),"FollowManager.setAllBlocked invalid userCids '".concat(t,"'")),e.next=3,this.blockedCache.clear();case 3:n=Object(X.a)(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=12;break}return a=r.value,e.next=10,this.addBlocked(a);case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),n.e(e.t0);case 17:return e.prev=17,n.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[4,14,17,20]])})));return function(t){return e.apply(this,arguments)}}()}]),e}()),ln=un;window.followManager=un;var pn=Object(a.createContext)(),dn=function(e){var t=Object(a.useState)({}),n=Object(d.a)(t,2),s=n[0],c=n[1],o=Object(a.useState)({}),u=Object(d.a)(o,2),l=u[0],p=u[1];Object(a.useEffect)((function(){Object(G.a)(V.a.mark((function e(){var t,n,r,a,s,i,o,u,l,d;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ln.getAllFollowing();case 2:return t=e.sent,e.next=5,ln.getAllBlocked();case 5:n=e.sent,r={},a=Object(X.a)(t);try{for(a.s();!(s=a.n()).done;)i=s.value,r[i]=!0}catch(f){a.e(f)}finally{a.f()}c(r),o={},u=Object(X.a)(n);try{for(u.s();!(l=u.n()).done;)d=l.value,o[d]=!0}catch(f){u.e(f)}finally{u.f()}p(o);case 14:case"end":return e.stop()}}),e)})))()}),[]);var f={following:s,addFollowing:function(e){ce()("string"===typeof e,"FollowingProvider.addFollowing invalid userCid '".concat(e,"'")),ln.addFollowing(e),c((function(t){return Object(Q.a)(Object(Q.a)({},t),{},Object(i.a)({},e,!0))}))},deleteFollowing:function(e){ce()("string"===typeof e,"FollowingProvider.deleteFollowing invalid userCid '".concat(e,"'")),ln.deleteFollowing(e),c((function(t){return Object(Q.a)(Object(Q.a)({},t),{},Object(i.a)({},e,!1))}))},setAllFollowing:function(e){ce()(Array.isArray(e),"FollowingProvider.setAllFollowing invalid userCids '".concat(e,"'")),ln.setAllFollowing(e);var t,n={},r=Object(X.a)(e);try{for(r.s();!(t=r.n()).done;){n[t.value]=!0}}catch(a){r.e(a)}finally{r.f()}c(n)},blocked:l,addBlocked:function(e){ce()("string"===typeof e,"FollowingProvider.addBlocked invalid userCid '".concat(e,"'")),ln.addBlocked(e),p((function(t){return Object(Q.a)(Object(Q.a)({},t),{},Object(i.a)({},e,!0))}))},deleteBlocked:function(e){ce()("string"===typeof e,"FollowingProvider.deleteBlocked invalid userCid '".concat(e,"'")),ln.deleteBlocked(e),p((function(t){return Object(Q.a)(Object(Q.a)({},t),{},Object(i.a)({},e,!1))}))},setAllBlocked:function(e){ce()(Array.isArray(e),"FollowingProvider.setAllBlocked invalid userCids '".concat(e,"'")),ln.setAllBlocked(e);var t,n={},r=Object(X.a)(e);try{for(r.s();!(t=r.n()).done;){n[t.value]=!0}}catch(a){r.e(a)}finally{r.f()}p(n)}},b=e.children;return Object(r.jsx)(pn.Provider,{value:f,children:b})},fn=function(e){ce()(!e||"string"===typeof e,"useIsFollowing invalid userCid '".concat(e,"'"));var t=Object(a.useContext)(pn),n=t.following,r=t.addFollowing,s=t.deleteFollowing,c=!!n[e],i=Object(a.useCallback)((function(t){e&&(ce()("boolean"===typeof t,"setIsFollowing invalid value '".concat(t,"' not a boolean")),!0===t&&r(e),!1===t&&s(e))}),[e]);return e?[c,i]:[void 0,i]},bn=Object(l.a)((function(e){return{menu:{"& .MuiPaper-rounded":{borderRadius:e.sav3.popoverMenu.borderRadius}},menuItemIcon:{minWidth:28},moreIconButton:{padding:e.spacing(.5),"& .MuiSvgIcon-root":{fontSize:"1.2rem"}}}}));function hn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userCid,n=bn(),a=H(),s=fn(t),c=Object(d.a)(s,2),i=c[0],o=c[1],u=Object(r.jsxs)(Ft.a,{onClick:function(){return o(!0)},children:[Object(r.jsx)(h.a,{className:n.menuItemIcon,children:Object(r.jsx)(rn.a,{fontSize:"small"})}),Object(r.jsx)(ct.a,{children:a.Follow()})]});return i&&(u=Object(r.jsxs)(Ft.a,{onClick:function(){return o(!1)},children:[Object(r.jsx)(h.a,{className:n.menuItemIcon,children:Object(r.jsx)(sn.a,{fontSize:"small"})}),Object(r.jsx)(ct.a,{children:a.Unfollow()})]})),u}hn.propTypes={userCid:on.a.string.isRequired};var jn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.post,n=bn(),s=Object(a.useState)(null),c=Object(d.a)(s,2),i=c[0],o=c[1],u=at();if(t.userCid===u)return Object(r.jsx)(N.a,{height:48,width:48});var l=function(e){o(e.currentTarget)},p=function(){o(null)};return Object(r.jsxs)("div",{children:[Object(r.jsx)(Xe.a,{className:n.moreIconButton,onClick:l,children:Object(r.jsx)(Kt.a,{})}),Object(r.jsx)(tn.a,{className:n.menu,elevation:4,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},anchorEl:i,keepMounted:!0,open:Boolean(i),onClose:p,children:Object(r.jsx)(hn,{userCid:t.userCid})})]})},vn=Object(l.a)((function(e){return{imgMedia:{height:0,paddingTop:"56.25%"},avatar:{marginTop:e.spacing(-.25),width:e.spacing(6),height:e.spacing(6),borderWidth:e.sav3.borderWidth,borderStyle:"solid",borderColor:e.sav3.borderColor},userCid:{wordBreak:"break-all",textDecoration:"inherit"},displayName:{color:"inherit",textDecoration:"inherit"},contentLink:{wordBreak:"break-all"},actions:{paddingTop:e.spacing(.5),maxWidth:.75*e.sav3.layout.columns.middle.width.md,marginLeft:e.spacing(-1)},actionIconButton:{padding:e.spacing(1),"& .MuiSvgIcon-root":{fontSize:"1rem",color:e.palette.text.secondary}}}}));function xn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.parentPost,n=vn(),s=Object(a.useState)(!1),c=Object(d.a)(s,2),i=c[0],o=c[1];return Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)(Xe.a,{className:n.actionIconButton,onClick:function(){return o(!0)},children:Object(r.jsx)(Qt.a,{})}),Object(r.jsx)(ut,{parentPost:t,open:i,onClose:function(){return o(!1)}})]})}function gn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.content,n=vn(),a=[t],s=On(t);if(s){var c=t.split(s),i=Object(d.a)(c,2),o=i[0],u=i[1],l=s;s.match(/^https?:\/\//)||(l="https://".concat(s)),a=[],o&&a.push(o),a.push(Object(r.jsx)(Xt.a,{className:n.contentLink,variant:"body2",href:l,target:"_blank",rel:"noopener",children:s},"content link")),u&&a.push(u)}var p,f=mn(t);f&&(p=Object(r.jsx)(Et.a,{className:n.imgMedia,image:f}),yn(f)&&(p=Object(r.jsx)(Et.a,{controls:!0,autoPlay:!0,muted:!0,component:"video",image:f})));var b=f&&Object(r.jsx)(N.a,{pt:1,children:Object(r.jsx)(zt.a,{variant:"outlined",children:p})});return Object(r.jsxs)(N.a,{children:[Object(r.jsx)(ct.a,{variant:"body2",children:a}),b]})}var On=function(e){if(e){ce()("string"===typeof e,"post content '".concat(e,"' is not a string"));var t=e.match(en()({strict:!1}));return t&&t[0]}},mn=function(e){if(e){ce()("string"===typeof e,"post content '".concat(e,"' is not a string"));var t=e.match(en()({strict:!1})),n=t&&t[0];if(n)return n=wn(n),kn(n)?(n.match(/^https?:\/\//)||(n="https://".concat(n)),n):void 0}},wn=function(e){return ce()("string"===typeof e,"forceHttps link '".concat(e,"' not a string")),e=(e=e.trim()).replace(/^http:\/\//,"https://")},yn=function(e){return e.replace(/[#?].*/).match(/\.(mp4|webm)$/)},kn=function(e){return e.replace(/[#?].*/).match(/\.(jpeg|jpg|png|gif|mp4|webm)$/)},Cn=function(e,t){var n=864e5,r=1e3*e,a=new Date(r).toLocaleString(t,{month:"short",day:"numeric"});return Date.now()>r+31536e6&&(a=new Date(r).toLocaleString(t,{year:"numeric",month:"short",day:"numeric"})),Date.now()<r+n&&(a=Object(E.a)(r,t)),a},Sn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.post,n=$t(),s=vn(),c=Cn(t.timestamp,n);return Object(r.jsxs)(N.a,{px:2,pt:1.5,pb:.5,display:"flex",children:[Object(r.jsx)(N.a,{pr:1.5,children:Object(r.jsx)(st.a,{component:A.b,to:{pathname:"/profile",state:{userCid:t.userCid}},src:t.profile.thumbnailUrl&&wn(t.profile.thumbnailUrl),className:s.avatar})}),Object(r.jsxs)(N.a,{width:"100%",children:[Object(r.jsxs)(N.a,{display:"flex",children:[Object(r.jsxs)(N.a,{flexGrow:1,children:[Object(r.jsxs)(N.a,{display:"flex",children:[t.profile.displayName&&Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)(ct.a,{className:s.displayName,component:A.b,to:{pathname:"/profile",state:{userCid:t.userCid}},variant:"subtitle2",children:t.profile.displayName}),"\xa0",Object(r.jsx)(ct.a,{variant:"subtitle2",children:"\xb7"}),"\xa0"]}),Object(r.jsx)(ct.a,{variant:"subtitle2",children:c})]}),Object(r.jsx)(N.a,{children:Object(r.jsx)(ct.a,{component:A.b,to:{pathname:"/profile",state:{userCid:t.userCid}},variant:"caption",color:"textSecondary",className:s.userCid,children:t.userCid})})]}),Object(r.jsx)(N.a,{children:Object(r.jsx)(jn,{post:t})})]}),Object(r.jsx)(gn,{content:t.content}),Object(r.jsxs)(N.a,{display:"flex",justifyContent:"space-between",className:s.actions,children:[Object(r.jsx)(xn,{parentPost:t}),Object(r.jsx)(Xe.a,{className:s.actionIconButton,children:Object(r.jsx)(Gt.a,{style:{transform:"rotate(90deg)"}})}),Object(r.jsx)(Xe.a,{className:s.actionIconButton,children:Object(r.jsx)(_t.a,{})}),Object(r.jsx)(Xe.a,{className:s.actionIconButton,children:Object(r.jsx)(qt.a,{})})]})]})]})};var In=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.posts,a=[],s=Object(X.a)(n);try{for(s.s();!(e=s.n()).done;){var c=e.value;a.push(Object(r.jsx)(Sn,{post:c},c.contentCid+c.timestamp)),a.push(Object(r.jsx)($e.a,{},c.contentCid+c.timestamp+"feed divider"))}}catch(i){s.e(i)}finally{s.f()}return Object(r.jsx)("div",{children:a})},Pn=function(e){ce()(!e||"string"===typeof e,"invalid userCid '".concat(JSON.stringify(e),"'"));var t=Object(a.useState)([]),n=Object(d.a)(t,2),r=n[0],s=n[1],c=nt(e),i=rt(e),o=c&&c.lastPostCid;return console.log("useUserPosts",{userIpnsData:c,userCid:e,userPosts:r}),Object(a.useEffect)((function(){o&&"string"===typeof o&&Object(G.a)(V.a.mark((function e(){var t,n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,He.getUserPostsFromLastPostCid(o);case 2:for(n in t=e.sent)t[n].profile=i||{};s(t);case 5:case"end":return e.stop()}}),e)})))()}),[o,JSON.stringify(i)]),r};var Fn=function(e){if(e){ce()("string"===typeof e,"user description '".concat(e,"' is not a string"));var t=e.match(en()({strict:!1}));return t&&t[0]}},Nn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.description,n=[t],a=Fn(t);if(a){var s=t.split(a),c=Object(d.a)(s,2),i=c[0],o=c[1],u=a;a.match(/$https?:\/\//)||(u="https://".concat(a)),n=[],i&&n.push(i),n.push(Object(r.jsx)(Xt.a,{variant:"body2",href:u,target:"_blank",rel:"noopener",children:a})),o&&n.push(o)}return Object(r.jsx)(ct.a,{variant:"body2",children:n})},Rn=Object(l.a)((function(e){return{errorMessage:{overflow:"hidden"},description:{"& textarea":{overflow:"hidden"}},content:{"& input":{padding:e.spacing(2),paddingLeft:e.spacing(2.5),paddingRight:e.spacing(2.5)},'& label[data-shrink="false"]':{transform:"translate(20px, 18px) scale(1)"},"& textarea":{paddingTop:e.spacing(1),paddingBottom:e.spacing(1),paddingLeft:e.spacing(.5),paddingRight:e.spacing(.5)},"& fieldset":{opacity:.25},"& .Mui-focused fieldset":{opacity:1}}}}));var Bn=function(e){var t=e.open,n=e.onClose,s=e.previousProfile,c=H(),o=Rn(),u=Object(a.useState)(s),l=Object(d.a)(u,2),p=l[0],f=l[1],b=Object(a.useState)(),h=Object(d.a)(b,2),j=h[0],v=h[1];Object(a.useEffect)((function(){f(s)}),[JSON.stringify(s)]);var x=function(e){var t=e.target,n=t.id,r=t.value,a=Object(Q.a)(Object(Q.a)({},p),{},Object(i.a)({},n,r));f(a)},g=function(){var e=Object(G.a)(V.a.mark((function e(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,He.editUserProfile(p);case 3:v(null),n(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),v(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),O=Object(r.jsxs)(N.a,{pt:1,pb:1.5,className:o.content,children:[Object(r.jsx)(Z.a,{onChange:x,autoFocus:!0,margin:"dense",id:"displayName",label:c["Display name"](),fullWidth:!0,variant:"outlined",value:p.displayName||""}),Object(r.jsx)(Z.a,{onChange:x,margin:"dense",id:"thumbnailUrl",label:c["Thumbnail URL"](),fullWidth:!0,variant:"outlined",value:p.thumbnailUrl||""}),Object(r.jsx)(Z.a,{onChange:x,margin:"dense",id:"bannerUrl",label:c["Banner URL"](),fullWidth:!0,variant:"outlined",value:p.bannerUrl||""}),Object(r.jsx)(Z.a,{className:o.description,onChange:x,margin:"dense",id:"description",label:c.Description(),fullWidth:!0,multiline:!0,rows:4,variant:"outlined",value:p.description||""}),j&&Object(r.jsx)(qe.a,{classes:{message:o.errorMessage},severity:"error",children:j})]}),m=Object(r.jsx)("div",{children:Object(r.jsx)(F.a,{disableElevation:!0,variant:"contained",onClick:g,color:"primary",children:"SAV3"})});return Object(r.jsx)(tt,{open:t,onClose:n,content:O,actions:m})},Un="data:image/png;base64,",An=Object(l.a)((function(e){return{banner:{paddingTop:"33.25%"},avatar:Object(i.a)({position:"absolute",width:e.sav3.layout.columns.middle.width.md/4,height:e.sav3.layout.columns.middle.width.md/4,marginTop:e.sav3.layout.columns.middle.width.md/-8,marginLeft:e.spacing(2),borderWidth:e.spacing(.5),borderStyle:"solid",borderColor:e.palette.background.default},e.breakpoints.down(e.sav3.layout.columns.middle.width.md),{width:"25vw",height:"25vw",marginTop:"-12.5vw",borderWidth:e.spacing(.25)}),displayName:{wordBreak:"break-all"}}}));function Tn(e){var t=e.profile,n=H(),s=Object(a.useState)(!1),c=Object(d.a)(s,2),i=c[0],o=c[1];return Object(r.jsxs)("div",{children:[Object(r.jsx)(F.a,{variant:"outlined",size:"large",color:"primary",onClick:function(){return o(!0)},children:n["Edit profile"]()}),Object(r.jsx)(Bn,{previousProfile:t,open:i,onClose:function(){return o(!1)}})]})}function Wn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userCid,n=H(),a=fn(t),s=Object(d.a)(a,2),c=s[0],i=s[1],o=Object(r.jsx)(F.a,{variant:"outlined",size:"large",color:"primary",onClick:function(){return i(!0)},children:n.Follow()});return c&&(o=Object(r.jsx)(F.a,{variant:"outlined",size:"large",color:"primary",onClick:function(){return i(!1)},children:n.Unfollow()})),o}Wn.propTypes={userCid:on.a.string.isRequired};var Dn=function(e){return ce()("string"===typeof e,"forceHttps link '".concat(e,"' not a string")),e=(e=e.trim()).replace(/^http:\/\//,"https://")},Mn=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.userCid,a=at(),s=An(),c=Pn(n),i=rt(n);console.log("Profile",{userCid:n,posts:c,profile:i}),n===a?e=Object(r.jsx)(Tn,{profile:i}):a&&(e=Object(r.jsx)(Wn,{userCid:n}));var o=i.description||"";return o&&o.length>140&&(o=o.substring(0,140)),Object(r.jsxs)("div",{className:s.root,children:[Object(r.jsx)(Et.a,{className:s.banner,image:i.bannerUrl&&Dn(i.bannerUrl)||Un}),Object(r.jsx)(st.a,{src:i.thumbnailUrl&&Dn(i.thumbnailUrl),className:s.avatar}),Object(r.jsxs)(N.a,{p:2,pb:0,display:"flex",flexDirection:"row-reverse",children:[e,Object(r.jsx)(Xe.a,{children:Object(r.jsx)(Kt.a,{})})]}),Object(r.jsx)(Mt.a,{className:s.displayName,pb:0,title:i.displayName,subheader:n}),Object(r.jsx)(N.a,{p:2,pt:0,children:Object(r.jsx)(Nn,{description:o})}),Object(r.jsx)($e.a,{}),Object(r.jsx)(In,{posts:c})]})};var En=function(){var e,t=Object(o.g)(),n=t.state&&t.state.userCid,a=!n,s=at(),c=rt(e=a?s:n),i=Object(o.f)(),u=H();return Object(r.jsxs)("div",{children:[Object(r.jsxs)(Tt,{children:[Object(r.jsx)(N.a,{pr:1,children:Object(r.jsx)(Xe.a,{onClick:function(){return i.goBack()},children:Object(r.jsx)(Dt.a,{})})}),Object(r.jsx)(ct.a,{noWrap:!0,variant:"h6",children:c.displayName||a&&u["Edit profile"]()})]}),Object(r.jsx)(Mn,{userCid:e})]})},Ln=n(70),Kn=function(){var e=Object(a.useState)(),t=Object(d.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){Object(G.a)(V.a.mark((function e(){var t;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,He.getOwnPeerCid();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})))()}),[]),n},zn=n(1357),Jn=Object(l.a)((function(e){return{text:{},root:{width:e.sav3.drawerMenu.width}}}));var _n=function(){var e=Jn(),t=H();return Object(r.jsx)("div",{className:e.root,children:Object(r.jsxs)(f.a,{children:[Object(r.jsxs)(b.a,{button:!0,component:A.b,to:"/following",children:[Object(r.jsx)(h.a,{children:Object(r.jsx)(k.a,{fontSize:"large"})}),Object(r.jsx)(j.a,{primary:t.Following(),className:e.text})]}),Object(r.jsxs)(b.a,{button:!0,component:A.b,to:"/profile",children:[Object(r.jsx)(h.a,{children:Object(r.jsx)(O.a,{fontSize:"large"})}),Object(r.jsx)(j.a,{primary:t.Profile(),className:e.text})]}),Object(r.jsxs)(b.a,{children:[Object(r.jsx)(Nt,{}),Object(r.jsx)(Rt,{})]})]})})},Hn=Object(l.a)((function(e){return{avatar:{width:e.sav3.topBar.height/1.75,height:e.sav3.topBar.height/1.75}}}));var qn=function(){var e=Kn(),t=Hn(),n=rt(e),s=Object(a.useState)(!1),c=Object(d.a)(s,2),i=c[0],o=c[1];return Object(r.jsxs)("div",{children:[Object(r.jsx)(Xe.a,{style:{backgroundColor:"transparent"},disableRipple:!0,disableFocusRipple:!0,onClick:function(){return o(!0)},children:Object(r.jsx)(st.a,{src:n.thumbnailUrl,className:t.avatar})}),Object(r.jsx)(zn.a,{achor:"left",elevation:2,open:i,onClose:function(){return o(!1)},children:Object(r.jsx)(_n,{})})]})},Vn=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){Object(G.a)(V.a.mark((function e(){var t;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ln.getAllFollowing();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})))()}),[]),n},Gn=function(e){ce()(Array.isArray(e),"invalid ipnsPaths '".concat(JSON.stringify(e),"'"));var t=Object(a.useState)({}),n=Object(d.a)(t,2),r=n[0],s=n[1];return console.log("useUsersIpnsData",{ipnsPaths:e,usersIpnsData:r}),Object(a.useEffect)((function(){if(e.length){var t=new Set(e),n=function(){var e=Object(G.a)(V.a.mark((function e(n,r){var a;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.has(n)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,He.getIpfsFile(r);case 4:a=e.sent,s((function(e){return Object(Q.a)(Object(Q.a)({},e),{},Object(i.a)({},n,JSON.parse(a)))}));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return He.on("publish",n),Object(G.a)(V.a.mark((function t(){var n,r,a,c;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,He.subscribeToIpnsPaths(e);case 2:n=t.sent,r=Object(X.a)(n.entries()),t.prev=4,c=function(){var t=Object(d.a)(a.value,2),n=t[0],r=t[1];if(!r)return"continue";var c=e[n];He.getIpfsFile(r).then((function(e){s((function(t){return Object(Q.a)(Object(Q.a)({},t),{},Object(i.a)({},c,JSON.parse(e)))}))}))},r.s();case 7:if((a=r.n()).done){t.next=13;break}if("continue"!==c()){t.next=11;break}return t.abrupt("continue",11);case 11:t.next=7;break;case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(4),r.e(t.t0);case 18:return t.prev=18,r.f(),t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[4,15,18,21]])})))(),function(){He.off("publish",n)}}}),[JSON.stringify(e)]),r},Zn=function(e){ce()(Array.isArray(e),"invalid userCids '".concat(JSON.stringify(e),"'"));var t=Object(a.useState)({}),n=Object(d.a)(t,2),r=n[0],s=n[1],c=Gn(e),o=[];for(var u in c)o.push(c[u].profileCid);return console.log("useUsersProfiles",{usersIpnsData:c,userCids:e,profileCids:o,usersProfiles:r}),Object(a.useEffect)((function(){if(o.length){var t,n=Object(X.a)(o.entries());try{var r=function(){var n=Object(d.a)(t.value,2),r=n[0],a=n[1];if(!a||"string"!==typeof a)return{v:void 0};var c=e[r];He.getUserProfile(a).then((function(e){s((function(t){return Object(Q.a)(Object(Q.a)({},t),{},Object(i.a)({},c,e))}))}))};for(n.s();!(t=n.n()).done;){var a=r();if("object"===typeof a)return a.v}}catch(c){n.e(c)}finally{n.f()}}}),[JSON.stringify(o)]),r},Qn=function(e){ce()(Array.isArray(e),"invalid userCids '".concat(JSON.stringify(e),"'"));var t=Object(a.useState)([]),n=Object(d.a)(t,2),r=n[0],s=n[1],c=Gn(e),i=Zn(e),o=[];for(var u in c)o.push(c[u].lastPostCid);return console.log("useUsersPosts",{usersIpnsData:c,userCids:e,lastPostCids:o,usersPosts:r}),Object(a.useEffect)((function(){if(o.length){var t,n=Object(X.a)(o.entries());try{var r=function(){var n=Object(d.a)(t.value,2),r=n[0],a=n[1];if(!a||"string"!==typeof a)return"continue";var c=e[r];He.getUserPostsFromLastPostCid(a).then((function(e){var t,n={},r=Object(X.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;a.profile=i[c]||{},n[a.cid]=a}}catch(o){r.e(o)}finally{r.f()}s((function(e){return Object(Q.a)(Object(Q.a)({},e),n)}))}))};for(n.s();!(t=n.n()).done;)r()}catch(a){n.e(a)}finally{n.f()}}}),[JSON.stringify(o),JSON.stringify(i)]),r},Xn=Object(l.a)((function(e){return{errorMessage:{overflow:"hidden"},content:{"& textarea":{overflow:"hidden"},"& fieldset":{border:"none"},"& .MuiInputBase-root":{paddingLeft:0,paddingRight:0},marginBottom:e.spacing(1)},contentInput:{paddingTop:0,paddingBottom:0},avatar:{marginTop:e.spacing(-.25),width:e.spacing(6),height:e.spacing(6),borderWidth:e.sav3.borderWidth,borderStyle:"solid",borderColor:e.sav3.borderColor}}}));var $n=function(){var e=H(),t=Xn(),n=Object(p.a)(),s=at(),c=rt(s),i=Object(a.useState)(""),o=Object(d.a)(i,2),u=o[0],l=o[1],f=Object(a.useState)(),b=Object(d.a)(f,2),h=b[0],j=b[1],v=function(){var e=Object(G.a)(V.a.mark((function e(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,He.publishPost({content:u});case 3:j(null),l(""),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),j(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),x=Object(r.jsxs)("div",{children:[Object(r.jsx)(N.a,{children:Object(r.jsx)($e.a,{})}),Object(r.jsxs)(N.a,{alignItems:"center",display:"flex",height:n.sav3.topBar.height,children:[Object(r.jsx)(N.a,{flexGrow:1}),Object(r.jsx)(F.a,{disableElevation:!0,variant:"contained",onClick:v,color:"primary",children:"SAV3"})]})]});return Object(r.jsxs)(N.a,{px:2,display:"flex",children:[Object(r.jsx)(N.a,{pr:1.5,py:1.5,children:Object(r.jsx)(st.a,{src:c.thumbnailUrl,className:t.avatar})}),Object(r.jsxs)(N.a,{pt:1,width:"100%",children:[Object(r.jsx)(Z.a,{className:t.content,onChange:function(e){var t=e.target.value;try{t.length>140&&(t=t.subtring(0,140)),l(t)}catch(n){}},margin:"dense",id:"content",placeholder:e["Uncensorable content"](),fullWidth:!0,multiline:!0,variant:"outlined",value:u}),h&&Object(r.jsx)(N.a,{py:1,children:Object(r.jsx)(qe.a,{classes:{message:t.errorMessage},severity:"error",children:h})}),x]})]})},Yn=n(1347);var er=function(){var e=Object(p.a)(),t=Object(Ye.a)(e.breakpoints.down("xs")),n=H(),a=Vn(),s=at();s&&(a=[s].concat(Object(Ln.a)(a)));var c=Qn(a),i=[];for(var o in c)i.push(c[o]);console.log("Home",{followingCids:a,posts:i,postsObject:c});var u=Object(r.jsx)(In,{posts:i});return i.length||(u=Object(r.jsxs)(N.a,{width:"100%",py:4,display:"flex",justifyContent:"center",alignItems:"center",children:[Object(r.jsx)(Yn.a,{size:24}),Object(r.jsx)(N.a,{p:.5}),Object(r.jsx)(ct.a,{variant:"body1",children:n["Connecting to peers"]()+"..."})]})),i.length||a.length||(u=Object(r.jsx)(N.a,{width:"100%",py:4,display:"flex",justifyContent:"center",alignItems:"center",children:Object(r.jsx)(ct.a,{variant:"body1",children:n["Not following anyone"]()+"..."})})),Object(r.jsxs)("div",{children:[Object(r.jsxs)(Tt,{children:[t&&Object(r.jsx)(N.a,{pl:2,pr:1,children:Object(r.jsx)(qn,{})}),Object(r.jsx)(N.a,{pl:2,children:Object(r.jsx)(ct.a,{noWrap:!0,variant:"h6",children:n.Home()})})]}),!t&&Object(r.jsxs)("div",{children:[Object(r.jsxs)(N.a,{pb:1,children:[Object(r.jsx)($n,{}),Object(r.jsx)($e.a,{})]}),Object(r.jsx)($e.a,{})]}),u]})},tr=n(1348),nr=n(89),rr=n.n(nr),ar=Object(l.a)((function(e){return{search:{height:e.sav3.topBar.height/1.5,"& fieldset":{border:"none",backgroundColor:e.palette.divider}}}}));var sr=function(){var e=ar(),t=Object(p.a)(),n=Object(Ye.a)(t.breakpoints.down("xs")),s=Object(a.useState)(),c=Object(d.a)(s,2),i=c[0],o=c[1],u=H();return Object(r.jsxs)("div",{children:[Object(r.jsxs)(Tt,{children:[Object(r.jsx)(N.a,{pl:n?2:4,children:n&&Object(r.jsx)(N.a,{pr:.5,children:Object(r.jsx)(qn,{})})}),Object(r.jsx)(N.a,{width:"100%",pl:0,pr:4,children:Object(r.jsx)(Z.a,{onChange:function(e){var t=e.target.value;try{t=t.trim(),o(t)}catch(n){}},InputProps:{spellCheck:!1,classes:{root:e.search},startAdornment:Object(r.jsx)(N.a,{pr:1,children:Object(r.jsx)(tr.a,{position:"start",children:Object(r.jsx)(w.a,{})})})},variant:"outlined",fullWidth:!0,placeholder:u["Search user ID"](),values:i})})]}),rr.a.cid(i)&&Object(r.jsx)(Mn,{userCid:i})]})},cr=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(0),c=Object(d.a)(s,2),i=c[0],o=c[1];return Object(a.useEffect)((function(){setInterval((function(){o(i+1)}),2e3)}),[]),Object(a.useEffect)((function(){Object(G.a)(V.a.mark((function e(){var t;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,He.getPeersCids();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})))()}),[i]),n};var ir=function(){var e=Object(p.a)(),t=Object(Ye.a)(e.breakpoints.down("xs")),n=H(),a=Object(o.f)(),s=cr(),c=at();c&&(s=[c].concat(Object(Ln.a)(s)));var i=Qn(s),u=[];for(var l in i)u.push(i[l]);console.log("Peers",{peersCids:s,posts:u,postsObject:i});var d=Object(r.jsx)(In,{posts:u});return u.length||(d=Object(r.jsxs)(N.a,{width:"100%",py:4,display:"flex",justifyContent:"center",alignItems:"center",children:[Object(r.jsx)(Yn.a,{size:24}),Object(r.jsx)(N.a,{p:.5}),Object(r.jsx)(ct.a,{variant:"body1",children:n["Connecting to peers"]()+"..."})]})),Object(r.jsxs)("div",{children:[Object(r.jsxs)(Tt,{children:[Object(r.jsx)(N.a,{pr:1,children:Object(r.jsx)(Xe.a,{onClick:function(){return a.goBack()},children:Object(r.jsx)(Dt.a,{})})}),Object(r.jsx)(ct.a,{noWrap:!0,variant:"h6",children:n["Connected peers posts"]()})]}),!t&&Object(r.jsxs)("div",{children:[Object(r.jsxs)(N.a,{pb:1,children:[Object(r.jsx)($n,{}),Object(r.jsx)($e.a,{})]}),Object(r.jsx)($e.a,{})]}),d]})},or=new Set,ur=pe({name:"ipIsoCountryCodeCache",maxSize:2e3}),lr=function(){var e=Object(G.a)(V.a.mark((function e(t){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur.get(t);case 2:if(!(n=e.sent)){e.next=5;break}return e.abrupt("return",n);case 5:throw or.has(t)||(or.add(t),pr(t).then((function(e){return ur.set(t,e)})).catch((function(e){return console.log(e)}))),Error("iso country code for ip '".concat(t,"' not cached yet"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pr=function(){var e=Object(G.a)(V.a.mark((function e(t){var n,r,a;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ce()("string"===typeof t,"invalid ip '".concat(t,"' not a string")),n="https://ipapi.co/".concat(t,"/country/"),e.prev=2,e.next=5,fetch(n);case 5:return a=e.sent,e.next=8,a.text();case 8:a=e.sent,r=a.trim().toUpperCase(),dr(r),e.next=17;break;case 13:throw e.prev=13,e.t0=e.catch(2),e.t0.message="failed getting country iso code from '".concat(n,"' response '").concat(a,"': ").concat(e.t0.message),e.t0;case 17:return e.abrupt("return",r);case 18:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),dr=function(e){var t=typeof e;ce()(/^[a-z]{2}$/i.test(e),"isoCountryCode must be an ISO 3166-1 alpha-2 string, but got '".concat("string"===t?e:t,"' instead"))},fr={getIsoCountryCodeFromIpCached:lr,getIsoCountryCodeFromIp:pr,getIsoCountryCodesFromIps:function(e){var t,n=[],r=Object(X.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(pr(a))}}catch(s){r.e(s)}finally{r.f()}return Promise.all(n)},isoCountryCodeToCountryFlagEmoji:function(e){dr(e);var t=Object(Ln.a)(e.toUpperCase()).map((function(e){return e.charCodeAt()+127397}));return String.fromCodePoint.apply(String,Object(Ln.a)(t))}},br=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(0),c=Object(d.a)(s,2),i=c[0],o=c[1];return Object(a.useEffect)((function(){setInterval((function(){o(i+1)}),5e3)}),[]),Object(a.useEffect)((function(){Object(G.a)(V.a.mark((function e(){var t,n,a,s,c,i;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,He.getPeersStats();case 2:t=e.sent,n=Object(X.a)(t),e.prev=4,n.s();case 6:if((a=n.n()).done){e.next=26;break}if((s=a.value).ip){e.next=10;break}return e.abrupt("continue",24);case 10:return c=void 0,e.prev=11,e.next=14,fr.getIsoCountryCodeFromIpCached(s.ip);case 14:c=e.sent,e.next=21;break;case 17:return e.prev=17,e.t0=e.catch(11),console.log(e.t0),e.abrupt("continue",24);case 21:i=fr.isoCountryCodeToCountryFlagEmoji(c),s.isoCountryCode=c,s.countryFlagEmoji=i;case 24:e.next=6;break;case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(4),n.e(e.t1);case 31:return e.prev=31,n.f(),e.finish(31);case 34:r(t);case 35:case"end":return e.stop()}}),e,null,[[4,28,31,34],[11,17]])})))()}),[i]),n},hr=n(351),jr=n.n(hr),vr=Object(l.a)((function(e){return{avatar:{marginTop:e.spacing(-.25),width:e.spacing(6),height:e.spacing(6),borderWidth:e.sav3.borderWidth,borderStyle:"solid",borderColor:e.sav3.borderColor,backgroundColor:e.palette.background.default},userCid:{wordBreak:"break-all"}}}));var xr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.peer,n=vr();return Object(r.jsx)("div",{children:Object(r.jsxs)(N.a,{px:2,py:1.5,display:"flex",children:[Object(r.jsx)(N.a,{pr:1.5,children:Object(r.jsx)(st.a,{className:n.avatar,children:t.countryFlagEmoji})}),Object(r.jsxs)(N.a,{width:"100%",children:[Object(r.jsxs)(N.a,{display:"flex",children:[Object(r.jsxs)(N.a,{flexGrow:1,children:[Object(r.jsx)(N.a,{display:"flex",children:Object(r.jsxs)(ct.a,{variant:"subtitle2",children:[t.ip,":",t.port]})}),Object(r.jsx)(N.a,{children:Object(r.jsx)(ct.a,{variant:"caption",color:"textSecondary",className:n.userCid,children:t.peerCid})})]}),Object(r.jsx)(N.a,{height:48})]}),Object(r.jsxs)(ct.a,{variant:"body2",children:["\u2b06\ufe0f",jr()(t.dataSent),"\xa0\xa0\u2b07\ufe0f",jr()(t.dataReceived)]})]})]})})};function gr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.peers,n=H();if(!t.length)return Object(r.jsxs)(N.a,{width:"100%",py:4,display:"flex",justifyContent:"center",alignItems:"center",children:[Object(r.jsx)(Yn.a,{size:24}),Object(r.jsx)(N.a,{p:.5}),Object(r.jsx)(ct.a,{variant:"body1",children:n["Connecting to peers"]()+"..."})]});var a,s=[],c=Object(X.a)(t);try{for(c.s();!(a=c.n()).done;){var i=a.value;s.push(Object(r.jsx)(xr,{peer:i},i.peerCid+i.port)),s.push(Object(r.jsx)($e.a,{},i.peerCid+i.port+"feed divider"))}}catch(o){c.e(o)}finally{c.f()}return Object(r.jsx)("div",{children:s})}var Or=function(){var e=H(),t=Object(o.f)(),n=br();return console.log("Stats",{peers:n}),Object(r.jsxs)("div",{children:[Object(r.jsxs)(Tt,{children:[Object(r.jsx)(N.a,{pr:1,children:Object(r.jsx)(Xe.a,{onClick:function(){return t.goBack()},children:Object(r.jsx)(Dt.a,{})})}),Object(r.jsx)(ct.a,{noWrap:!0,variant:"h6",children:e["Connected peers stats"]()})]}),Object(r.jsx)(gr,{peers:n})]})},mr=Object(l.a)((function(e){return{avatar:{marginTop:e.spacing(-.25),width:e.spacing(6),height:e.spacing(6),borderWidth:e.sav3.borderWidth,borderStyle:"solid",borderColor:e.sav3.borderColor,backgroundColor:e.palette.background.default},userCid:{wordBreak:"break-all",textDecoration:"inherit"},displayName:{color:"inherit",textDecoration:"inherit"}}}));var wr=function(e){return ce()("string"===typeof e,"forceHttps link '".concat(e,"' not a string")),e=(e=e.trim()).replace(/^http:\/\//,"https://")},yr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.user,n=mr(),a=H(),s=fn(t.cid),c=Object(d.a)(s,2),i=c[0],o=c[1],u=Object(r.jsx)(F.a,{variant:"outlined",size:"small",color:"primary",onClick:function(){return o(!0)},children:a.Follow()});return i&&(u=Object(r.jsx)(F.a,{variant:"outlined",size:"small",color:"primary",onClick:function(){return o(!1)},children:a.Unfollow()})),Object(r.jsx)("div",{children:Object(r.jsxs)(N.a,{px:2,py:1.5,display:"flex",children:[Object(r.jsx)(N.a,{pr:1.5,children:Object(r.jsx)(st.a,{component:A.b,to:{pathname:"/profile",state:{userCid:t.cid}},src:t.thumbnailUrl&&wr(t.thumbnailUrl),className:n.avatar})}),Object(r.jsxs)(N.a,{width:"100%",children:[Object(r.jsxs)(N.a,{display:"flex",children:[Object(r.jsxs)(N.a,{flexGrow:1,children:[Object(r.jsx)(N.a,{display:"flex",children:Object(r.jsx)(ct.a,{className:n.displayName,component:A.b,to:{pathname:"/profile",state:{userCid:t.cid}},variant:"subtitle2",children:t.displayName})}),Object(r.jsx)(N.a,{children:Object(r.jsx)(ct.a,{component:A.b,to:{pathname:"/profile",state:{userCid:t.cid}},variant:"caption",color:"textSecondary",className:n.userCid,children:t.cid})})]}),Object(r.jsx)(N.a,{height:48,children:u})]}),Object(r.jsx)(ct.a,{variant:"body2",children:t.description})]})]})})};var kr=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.users,a=[],s=Object(X.a)(n);try{for(s.s();!(e=s.n()).done;){var c=e.value;a.push(Object(r.jsx)(yr,{user:c},c.cid)),a.push(Object(r.jsx)($e.a,{},c.cid+"feed divider"))}}catch(i){s.e(i)}finally{s.f()}return Object(r.jsx)("div",{children:a})};var Cr=function(){var e,t=H(),n=Object(o.f)(),a=Vn(),s=Zn(a),c=[],i=Object(X.a)(a);try{for(i.s();!(e=i.n()).done;){var u=e.value,l=s[u]||{};l.cid=u,c.push(l)}}catch(p){i.e(p)}finally{i.f()}return console.log("Following",{followingCids:a,profiles:s,users:c}),Object(r.jsxs)("div",{children:[Object(r.jsxs)(Tt,{children:[Object(r.jsx)(N.a,{pr:1,children:Object(r.jsx)(Xe.a,{onClick:function(){return n.goBack()},children:Object(r.jsx)(Dt.a,{})})}),Object(r.jsx)(ct.a,{noWrap:!0,variant:"h6",children:t.Following()})]}),Object(r.jsx)(kr,{users:c})]})},Sr=function(){var e=Object(a.useContext)(pn),t=e.following,n=e.setAllFollowing;return[Object.keys(t).filter((function(e){return!!t[e]})),n]},Ir=Object(l.a)((function(e){return{message:{overflow:"hidden"},data:{"& textarea":{fontFamily:"Monospace",minHeight:"10vh",maxHeight:"40vh",overflowY:"scroll!important"},"& fieldset":{border:"none"},"& .MuiInputBase-root":{paddingLeft:0,paddingRight:0},marginBottom:e.spacing(1)}}}));var Pr=function(){var e=H(),t=Ir(),n=Object(p.a)(),s=Sr(),c=Object(d.a)(s,2)[1],i=Object(a.useState)(""),o=Object(d.a)(i,2),u=o[0],l=o[1],f=Object(a.useState)(),b=Object(d.a)(f,2),h=b[0],j=b[1],v=Object(a.useState)(),x=Object(d.a)(v,2),g=x[0],O=x[1],m=function(e){try{e.target.setSelectionRange(0,e.target.value.length)}catch(t){}},w=function(){var e=Object(G.a)(V.a.mark((function e(){var t,n,r;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l("Exporting..."),j(null),O(null),e.prev=3,e.next=6,ln.getAllFollowing();case 6:return t=e.sent,e.next=9,He.getPrivateKey();case 9:n=e.sent,console.log({privateKey:n}),r=JSON.stringify({privateKey:n,following:t}),j(null),l(r),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),j(e.t0.message);case 19:O("Export successful. Copy paste your data somewhere safe.");case 20:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(G.a)(V.a.mark((function e(){var t,n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(null),O(null),e.prev=2,t=JSON.parse(u),e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(2),j("Invalid JSON: ".concat(e.t0.message)),e.abrupt("return");case 10:if(h===(n="Did you backup your data? Importing will irreversibly delete it. Click import again to confirm.")){e.next=14;break}return j(n),e.abrupt("return");case 14:return e.prev=14,e.next=17,ln.setAllFollowing(t.following);case 17:c(t.following),e.next=24;break;case 20:return e.prev=20,e.t1=e.catch(14),j("Invalid following: ".concat(e.t1.message)),e.abrupt("return");case 24:return e.prev=24,e.next=27,ln.setAllFollowing(t.following);case 27:c(t.following),e.next=34;break;case 30:return e.prev=30,e.t2=e.catch(24),j("Invalid privateKey: ".concat(e.t2.message)),e.abrupt("return");case 34:j(null),O("Import successful.");case 36:case"end":return e.stop()}}),e,null,[[2,6],[14,20],[24,30]])})));return function(){return e.apply(this,arguments)}}(),k=Object(r.jsxs)("div",{children:[Object(r.jsx)(N.a,{children:Object(r.jsx)($e.a,{})}),Object(r.jsxs)(N.a,{alignItems:"center",display:"flex",height:n.sav3.topBar.height,children:[Object(r.jsx)(N.a,{flexGrow:1}),Object(r.jsx)(F.a,{disableElevation:!0,variant:"contained",onClick:y,color:"primary",children:e.Import()}),Object(r.jsx)(N.a,{pr:.5}),Object(r.jsx)(F.a,{disableElevation:!0,variant:"contained",onClick:w,color:"primary",children:e.Export()})]})]});return Object(r.jsx)(N.a,{px:2,display:"flex",children:Object(r.jsxs)(N.a,{pt:0,width:"100%",children:[Object(r.jsx)(Z.a,{onClick:m,onFocus:m,className:t.data,onChange:function(e){var t=e.target.value;l(t)},margin:"dense",id:"data",placeholder:"Paste exported data here...",fullWidth:!0,multiline:!0,variant:"outlined",value:u}),h&&Object(r.jsx)(N.a,{pb:1,children:Object(r.jsx)(qe.a,{classes:{message:t.message},severity:"error",children:h})}),g&&Object(r.jsx)(N.a,{pb:1,children:Object(r.jsx)(qe.a,{classes:{message:t.message},severity:"success",children:g})}),Object(r.jsx)(N.a,{pb:0}),k]})})};var Fr=function(){var e=Object(p.a)(),t=Object(Ye.a)(e.breakpoints.down("xs")),n=H();return Object(r.jsxs)("div",{children:[Object(r.jsxs)(Tt,{children:[t&&Object(r.jsx)(N.a,{pl:2,pr:1,children:Object(r.jsx)(qn,{})}),Object(r.jsx)(N.a,{pl:2,children:Object(r.jsxs)(ct.a,{noWrap:!0,variant:"h6",children:[n.Import()," / ",n.Export()]})})]}),Object(r.jsx)(Pr,{})]})},Nr=Object(l.a)((function(e){var t,n,r;return{leftColumn:(t={overflow:"hidden"},Object(i.a)(t,e.breakpoints.down("xs"),{display:"none"}),Object(i.a)(t,e.breakpoints.down("md"),{width:e.sav3.layout.columns.left.width.xs}),Object(i.a)(t,e.breakpoints.down("lg"),{width:e.sav3.layout.columns.left.width.xs}),Object(i.a)(t,e.breakpoints.up("lg"),{width:e.sav3.layout.columns.left.width.md}),t),middleColumn:(n={overflow:"hidden"},Object(i.a)(n,e.breakpoints.down("xs"),{width:"100%"}),Object(i.a)(n,e.breakpoints.up("xs"),{width:e.sav3.layout.columns.middle.width.md}),Object(i.a)(n,"borderLeftWidth",e.sav3.borderWidth),Object(i.a)(n,"borderRightWidth",e.sav3.borderWidth),Object(i.a)(n,"borderTopWidth",0),Object(i.a)(n,"borderBottomWidth",0),Object(i.a)(n,"borderStyle","solid"),Object(i.a)(n,"borderColor",e.sav3.borderColor),n),rightColumn:(r={overflow:"hidden"},Object(i.a)(r,e.breakpoints.down("sm"),{display:"none"}),Object(i.a)(r,e.breakpoints.down("lg"),{width:e.sav3.layout.columns.right.width.md,paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}),Object(i.a)(r,e.breakpoints.up("lg"),{width:e.sav3.layout.columns.right.width.lg,paddingLeft:e.spacing(4),paddingRight:e.spacing(4)}),r),bottomMenu:Object(i.a)({},e.breakpoints.up("sm"),{display:"none"}),appBar:{backgroundColor:e.palette.background.default}}}));var Rr=function(){var e=Nr(),t=Object(p.a)();return window.theme=t,Object(r.jsxs)("div",{children:[Object(r.jsxs)(u.a,{container:!0,justify:"center",children:[Object(r.jsx)(u.a,{item:!0,className:e.leftColumn,children:Object(r.jsx)(dt,{})}),Object(r.jsx)(u.a,{item:!0,className:e.middleColumn,children:Object(r.jsxs)(o.c,{children:[Object(r.jsx)(o.a,{path:"/",exact:!0,children:Object(r.jsx)(er,{})}),Object(r.jsx)(o.a,{path:"/profile",exact:!0,children:Object(r.jsx)(En,{})}),Object(r.jsx)(o.a,{path:"/search",exact:!0,children:Object(r.jsx)(sr,{})}),Object(r.jsx)(o.a,{path:"/peers",exact:!0,children:Object(r.jsx)(ir,{})}),Object(r.jsx)(o.a,{path:"/stats",exact:!0,children:Object(r.jsx)(Or,{})}),Object(r.jsx)(o.a,{path:"/following",exact:!0,children:Object(r.jsx)(Cr,{})}),Object(r.jsx)(o.a,{path:"/export",exact:!0,children:Object(r.jsx)(Fr,{})})]})}),Object(r.jsxs)(u.a,{item:!0,className:e.rightColumn,children:[Object(r.jsx)(Nt,{}),Object(r.jsx)(Rt,{})]})]}),Object(r.jsx)(vt,{className:e.bottomMenu})]})},Br=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,1360)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))},Ur=n(1350);c.a.render(Object(r.jsx)(A.a,{children:Object(r.jsx)(It,{children:Object(r.jsx)(_,{children:Object(r.jsxs)(dn,{children:[Object(r.jsx)(Ur.a,{}),Object(r.jsx)(Rr,{})]})})})}),document.getElementById("root")),Br()},241:function(e,t,n){"use strict";var r={starServers:["/dns4/star.sav3.org/tcp/443/wss/p2p-webrtc-star/"],ipnsServer:"https://ipns.sav3.org"};window.config=r,t.a=r},271:function(e,t){},326:function(e,t){},541:function(e,t,n){"use strict";(function(e){var r=n(348),a=n(29),s=n(1),c=n.n(s),i=n(10),o=n(117),u=n(92),l=n(237),p=n(255),d=n(11),f=n.n(d),b=n(346),h=n.n(b),j=n(38),v=n.n(j),x=n(82),g=n.n(x),O=n(53),m=n.n(O),w=n(165),y=n.n(w),k=n(27),C=n.n(k),S=n(26),I=n.n(S),P=n(89),F=n.n(P),N=n(240),R=n.n(N),B=n(241),U=function(t){Object(l.a)(r,t);var n=Object(p.a)(r);function r(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.ipfs;return Object(o.a)(this,r),e=n.call(this),f()(a&&"object"===typeof a),e.ipfs=a,e.privateKey=null,e.webSocketClient=null,e.peerCid=null,e.url=B.a.ipnsServer,e.subscriptionIpnsValueCache=new R.a({maxSize:1e4}),e.start(),e}return Object(u.a)(r,[{key:"start",value:function(){var e=Object(i.a)(c.a.mark((function e(){var t,n=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f()(null===this.webSocketClient),this.webSocketClient=h()(this.url),e.next=4,this.ipfs.key.export("self","password");case 4:return t=e.sent,e.next=7,g.a.keys.import(t,"password");case 7:return this.privateKey=e.sent,e.next=10,this.ipfs.id();case 10:this.peerCid=e.sent.id,this.webSocketClient.on("publish",function(){var e=Object(i.a)(c.a.mark((function e(t,r){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t,r);case 2:a=e.sent,n.subscriptionIpnsValueCache.set(t,a),n.emit("publish",t,a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.webSocketClient.close();case 2:this.webSocketClient=null;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isReady",value:function(){return this.webSocketClient&&this.privateKey}},{key:"waitForReady",value:function(){var e=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isReady()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,y()(10);case 4:return e.next=6,this.waitForReady();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"subscribe",value:function(){var e=Object(i.a)(c.a.mark((function e(t){var n,r,s,i,o,u,l,p,d,f=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(t),e.next=3,this.waitForReady();case 3:n=!0,r=[],s=Object(a.a)(t);try{for(s.s();!(i=s.n()).done;)o=i.value,u=this.subscriptionIpnsValueCache.get(o),r.push(u),u||(n=!1)}catch(c){s.e(c)}finally{s.f()}if(!n){e.next=10;break}return console.log("ipns.subscribe",{allResultsAreCached:n,ipnsPaths:t,cachedIpnsValues:r}),e.abrupt("return",r);case 10:return e.next=12,new Promise((function(e){return f.webSocketClient.emit("subscribe",t,e)}));case 12:return l=e.sent,e.next=15,T(t,l);case 15:for(d in p=e.sent,t)this.subscriptionIpnsValueCache.set(t[d],p[d]);return console.log("ipns.subscribe",{allResultsAreCached:n,ipnsPaths:t,ipnsValues:p}),e.abrupt("return",p);case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRecords",value:function(){var e=Object(i.a)(c.a.mark((function e(t){var n,r,a=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(t),e.next=3,this.waitForReady();case 3:return e.next=5,new Promise((function(e){return a.webSocketClient.emit("resolve",t,e)}));case 5:return n=e.sent,e.next=8,D(t,n);case 8:return r=e.sent,e.abrupt("return",r);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unsubscribe",value:function(){var e=Object(i.a)(c.a.mark((function e(t){var n,r,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(t),e.next=3,this.waitForReady();case 3:n=Object(a.a)(t);try{for(n.s();!(r=n.n()).done;)s=r.value,this.subscriptionIpnsValueCache.delete(s)}catch(c){n.e(c)}finally{n.f()}return e.next=7,this.webSocketClient.emit("unsubscribe",t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"publish",value:function(){var t=Object(i.a)(c.a.mark((function t(){var n,r,a,s,i,o,u,l=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.length>0&&void 0!==l[0]?l[0]:{},r=n.value,a=n.sequence,f()("string"===typeof r),f()("number"===typeof a),t.next=5,this.waitForReady();case 5:return r.startsWith("/ipfs/")||(r="/ipfs/".concat(r)),s=31536e7,t.next=9,m.a.create(this.privateKey,r,a,s);case 9:return i=t.sent,t.next=12,m.a.embedPublicKey(this.privateKey.public,i);case 12:return o=e.from(m.a.marshal(i)),u=this.peerCid,t.next=16,this.webSocketClient.emit("publish",u,o);case 16:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),r}(v.a),A=function(e){f()(Array.isArray(e),"ipns paths '".concat(e,"' not an array"));var t,n=Object(a.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;f()("string"===typeof r,"ipns paths '".concat(e,"' contains non string '").concat(r,"'"))}}catch(s){n.e(s)}finally{n.f()}},T=function(){var e=Object(i.a)(c.a.mark((function e(t,n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f()(Array.isArray(t)),f()(Array.isArray(n)),r=[],e.t0=c.a.keys(t);case 4:if((e.t1=e.t0()).done){e.next=16;break}if(a=e.t1.value,null!==n[a]){e.next=9;break}return r.push(null),e.abrupt("continue",4);case 9:return e.t2=r,e.next=12,W(t[a],n[a]);case 12:e.t3=e.sent,e.t2.push.call(e.t2,e.t3),e.next=4;break;case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),W=function(){var e=Object(i.a)(c.a.mark((function e(t,n){var r,a,s,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f()("string"===typeof t),n=new Uint8Array(n),r=m.a.unmarshal(n),a=m.a.extractPublicKey({},r),e.next=6,m.a.validate(a,r);case 6:return e.next=8,I.a.createFromPubKey(a.bytes);case 8:return s=e.sent,f()(s.equals(I.a.createFromB58String(t))),i=C()(r.value),f()(F.a.cid(i.replace(/^\/ipfs\//,""))),e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),D=function(){var e=Object(i.a)(c.a.mark((function e(t,n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f()(Array.isArray(t)),f()(Array.isArray(n)),r=[],e.t0=c.a.keys(t);case 4:if((e.t1=e.t0()).done){e.next=16;break}if(a=e.t1.value,null!==n[a]){e.next=9;break}return r.push(null),e.abrupt("continue",4);case 9:return e.t2=r,e.next=12,M(t[a],n[a]);case 12:e.t3=e.sent,e.t2.push.call(e.t2,e.t3),e.next=4;break;case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),M=function(){var e=Object(i.a)(c.a.mark((function e(t,n){var r,a,s,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f()("string"===typeof t),n=new Uint8Array(n),r=m.a.unmarshal(n),a=m.a.extractPublicKey({},r),e.next=6,m.a.validate(a,r);case 6:return e.next=8,I.a.createFromPubKey(a.bytes);case 8:return s=e.sent,f()(s.equals(I.a.createFromB58String(t))),i=C()(r.value),f()(F.a.cid(i.replace(/^\/ipfs\//,""))),e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();window.IpnsClient=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(r.a)(U,t)},window.ipns=m.a,t.a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(r.a)(U,t)}}).call(this,n(23).Buffer)},577:function(e,t){},584:function(e,t){},658:function(e,t){},659:function(e,t){},759:function(e,t){},761:function(e,t){},817:function(e,t){},879:function(e,t){},881:function(e,t){},975:function(e,t){}},[[1283,1,2]]]);
//# sourceMappingURL=main.9a1fc03b.chunk.js.map